<!DOCTYPE html>
<!-- saved from url=(0038)https://labuladong.gitee.io/algo/1/13/ -->
<html lang="en" class="js csstransforms3d supports csstransforms3d"><br id="my_padding" version="3.7.1" data="elafhogmnaapleckojedgipgmidneccg" style="display: none;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style id="giscus-css">
  .giscus, .giscus-frame {
    width: 100%;
    min-height: 150px;
  }

  .giscus-frame {
    border: none;
    color-scheme: normal;
  }
</style>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.93.2">
    <meta name="description" content="">
<meta name="author" content="labuladong">

    <link rel="icon" href="https://labuladong.gitee.io/algo/images/avatar.png" type="image/png">

    <title>一个方法团灭 LeetCode 股票买卖问题 :: labuladong的算法小抄</title>

    
    <link href="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/nucleus.css" rel="stylesheet">
    <link href="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/fontawesome-all.min.css" rel="stylesheet">
    <link href="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/hybrid.css" rel="stylesheet">
    <link href="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/featherlight.min.css" rel="stylesheet">
    <link href="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/perfect-scrollbar.min.css" rel="stylesheet">
    <link href="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/auto-complete.css" rel="stylesheet">
    <link href="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/atom-one-dark-reasonable.css" rel="stylesheet">
    <link href="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/theme.css" rel="stylesheet">
    <link href="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/tabs.css" rel="stylesheet">
    <link href="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/hugo-theme.css" rel="stylesheet">
    
    <link href="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/theme-green.css" rel="stylesheet">
    
    <link href="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/myimage.css" rel="stylesheet">

    <script src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/hm.js.下载"></script><script src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/jquery-3.3.1.min.js.下载"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    <style type="text/css">
     
    pre code {
        white-space: pre;
    }

     
     

    details[open] > summary:first-of-type {
        list-style-type: disclosure-open;
    }

    details > summary:first-of-type {
        display: list-item;
        counter-increment: list-item 0;
        list-style: inside disclosure-closed;
    }

     
    .tooltip {
        position: relative;
        display: inline-block;
        border-bottom: 1px dotted black;
    }

    .tooltip .tooltiptext {
        display: block;
        visibility: hidden;
        width: 400px;
        height: fit-content;
         
        white-space: normal;
        line-height: normal;

        background-color: black;
        color: white;
        border-radius: 6px;
        border: 1px solid #737373;
        padding: 0px 8px 8px 8px;
        overflow: auto;

         
        position: absolute;
        bottom: 100%;
        left: 50%;
        margin-left: -200px;
    }

    div.tooltiptext p {
        font-style: normal;
        margin: 0.5rem;
    }

    div.tooltiptext img {
        margin: 0 !important;
    }

    div.tooltiptext code {
        border-radius: 2px;
        white-space: nowrap;
        color: #5e5e5e;
        background: #FFF7DD;
        border: 1px solid #fbf0cb;
        padding: 0px 2px;
    }

    .tooltip:hover .tooltiptext {
        visibility: visible;
    }

     
    #body-inner img.my_header_icon {
        display: inline-block;
        margin: 0px 1px 0px 1px;
    }

    #body-inner img.souyisou_pic {
        margin: 1rem auto 2rem auto
    }

     
    #read_all_wrapper {
        display: block;
        position: absolute;
        bottom: 0px;
        z-index: 888;
        width: 100%;
        margin-top: -100px;
    }

   #read_all_mask {
        position: relative;
        height: 200px;
        background: -webkit-gradient(linear, 0 0%, 0 100%, from(rgba(255, 255, 255, 0)), to(rgb(255, 255, 255)));
    }

    #read_all_btn {
        position: absolute;
        left: 50%;
        top: 70%;
        bottom: 30px;
        transform: translate(-50%, -50%);
        width: 160px;
        height: 36px;
        line-height: 36px;
        font-size: 15px;
        text-align: center;
        border: 1px solid rgb(1, 36, 3);
        background: rgb(255, 255, 255);
        cursor: pointer;
        border-radius: 6px;
        color: #1d1f21;
    }

    #guiding_popup_wrapper {
        display: none;
    }

    #guiding_popup_mask {
        position: fixed;
        display: inline-block;
        inset: 0px;
        opacity: 0.7;
        z-index: 1111;
        background: rgb(0, 0, 0);
    }

    #guiding_popup_div {
        position: fixed;
        display: inline-block;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 320px;
        text-align: center;
        font-size: 13px;
        background: rgb(255, 255, 255);
        border-radius: 10px;
        z-index: 2222;
    }

    #guiding_popup_div_close_btn {
        position: absolute;
        top: 5px;
        right: 15px;
        line-height: 34px;
        font-size: 34px;
        cursor: pointer;
        opacity: 0.2;
        z-index: 9999;
        color: rgb(0, 0, 0);
        background: none;
        border: none;
        outline: none;
    }

    #guiding_popup_div_header {
        margin-top: 40px;
        line-height: 1.8;
        font-size: 15px;
    }
</style>



<link rel="manifest" href="https://labuladong.gitee.io/algo/manifest.json">

<link rel="apple-touch-icon" sizes="180x180" href="https://labuladong.gitee.io/algo/images/avatar.jpeg">

<script>
    if ('serviceWorker' in navigator) {
        
        navigator.serviceWorker.register('/algo/service-worker.js');
    }
</script>

<script src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/md.js.下载"></script>
  </head>
  <body class="" data-url="../../1/13/">
    <nav id="sidebar" class="showVisitedLinks">

  
  
  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://labuladong.gitee.io/algo/">

  <svg id="grav-logo" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" viewBox="0 0 285.1 69.9" xml:space="preserve">
<g>
	<path d="M35,0c9.6,0,17.9,3.4,24.7,10.3c6.8,6.8,10.3,15,10.3,24.7c0,9.7-3.4,17.9-10.3,24.7c-6.8,6.8-15,10.3-24.7,10.3
		c-9.7,0-17.9-3.4-24.7-10.3C3.4,52.8,0,44.6,0,34.9c0-9.6,3.4-17.9,10.3-24.7C17.1,3.4,25.3,0,35,0z M22.3,63.7
		c0.3-7.4,0.3-14.7,0-22.1c-2.1-0.4-4-0.4-5.9,0c-0.2,0.8-0.2,2.5-0.1,4.9c0.1,2.3,0,3.9-0.3,4.8c-1.7-0.6-2.7-2.1-3.1-4.6
		c-0.1-0.7-0.1-3.3-0.1-8c0-14.5-0.1-23-0.3-25.6c-3.6,4.1-5.6,7-5.9,8.5v10.9c0,4.5,0.1,8.1,0.2,10.9c0,0.4,0,1.3-0.1,2.8
		c-0.1,1.2,0,2.1,0.1,2.6c0.1,0.6,1.1,2.1,2.8,4.7C13.2,58.7,17.5,62.2,22.3,63.7z M44.6,65.4c0.3-5,0.2-12.9-0.1-23.6
		c-2.1-0.3-4.1-0.3-5.9,0c-0.2,2-0.2,5.1-0.1,9.5c0.1,4.3,0,7.5-0.1,9.5c-2.9,0.4-5,0.3-6.2-0.1c-0.2-5.6-0.2-15.2-0.1-28.7
		c0.1-12.4,0-21.8-0.3-28.3c-2.4,0.1-4.3,0.6-5.7,1.3c-0.1,7.7-0.2,17.7-0.1,30.1c0,16.5,0,26.6,0,30.3c2.3,1.1,5.4,1.7,9.4,1.7
		C38.9,66.9,42.1,66.4,44.6,65.4z M48.1,64.1c9.7-4.6,15.7-12,18-22.2c-1.8-0.2-3.8-0.3-6.1-0.3c-1.6,3.9-2.6,6.3-3.2,7.2
		c-1.1,1.7-2,2.5-2.7,2.5C54,46,54,39.1,54,30.5c0-11.5,0-18.4,0-20.9c-1.4-1.4-3.3-2.5-5.7-3.4C48.1,6.3,48,6.4,48,6.7
		c0,3.5,0,13.1,0,28.8C47.9,47.2,48,56.8,48.1,64.1z"></path>
</g>
    <g>
	<path d="M116.6,51.3h-29c-0.5,0-0.9-0.1-1.3-0.2c-0.4-0.2-0.7-0.4-1-0.7c-0.3-0.3-0.5-0.6-0.7-1c-0.2-0.4-0.2-0.8-0.2-1.3V16.3h6.3
		V45h25.8V51.3z"></path>
      <path d="M154.8,51.3h-22.9c-0.9,0-1.8-0.2-2.9-0.5c-1-0.3-2-0.8-2.9-1.5c-0.9-0.7-1.6-1.6-2.2-2.8c-0.6-1.1-0.9-2.5-0.9-4.2V19.5
		c0-0.4,0.1-0.9,0.2-1.2c0.2-0.4,0.4-0.7,0.7-1c0.3-0.3,0.6-0.5,1-0.7c0.4-0.2,0.8-0.2,1.3-0.2h28.6v6.3h-25.4v19.8
		c0,0.8,0.2,1.5,0.7,1.9s1.1,0.7,1.9,0.7h22.9V51.3z M151.9,37h-20v-6.4h20V37z"></path>
      <path d="M197.3,51.3H191v-8.6h-22.3v8.6h-6.3V33.8c0-2.6,0.4-4.9,1.3-7.1s2.1-4,3.7-5.5c1.6-1.5,3.4-2.8,5.5-3.6
		c2.1-0.9,4.5-1.3,7-1.3h14.3c0.4,0,0.9,0.1,1.2,0.2c0.4,0.2,0.7,0.4,1,0.7s0.5,0.6,0.7,1c0.2,0.4,0.2,0.8,0.2,1.2V51.3z
		 M168.7,36.4H191V22.6h-11.2c-0.2,0-0.6,0-1.2,0.1c-0.6,0.1-1.4,0.2-2.2,0.4c-0.8,0.2-1.7,0.6-2.6,1c-0.9,0.5-1.8,1.1-2.5,2
		c-0.8,0.8-1.4,1.9-1.9,3.1c-0.5,1.2-0.7,2.8-0.7,4.5V36.4z"></path>
      <path d="M241.7,28.1c0,1.4-0.2,2.7-0.5,3.9c-0.4,1.1-0.8,2.1-1.5,3c-0.6,0.9-1.3,1.6-2.1,2.2c-0.8,0.6-1.6,1.1-2.5,1.5
		c-0.9,0.4-1.8,0.7-2.6,0.9c-0.9,0.2-1.7,0.3-2.5,0.3l13.3,11.5h-9.8l-13.2-11.5h-4.6v-6.3H230c0.8-0.1,1.5-0.2,2.2-0.5
		c0.7-0.3,1.2-0.6,1.7-1.1c0.5-0.5,0.9-1,1.1-1.6c0.3-0.6,0.4-1.4,0.4-2.2v-4c0-0.4,0-0.6-0.1-0.8c-0.1-0.2-0.2-0.3-0.3-0.4
		c-0.1-0.1-0.3-0.1-0.4-0.2c-0.2,0-0.3,0-0.4,0h-20.9v28.7h-6.3V19.5c0-0.4,0.1-0.9,0.2-1.2c0.2-0.4,0.4-0.7,0.7-1
		c0.3-0.3,0.6-0.5,1-0.7c0.4-0.2,0.8-0.2,1.3-0.2H234c1.4,0,2.6,0.3,3.6,0.8s1.8,1.2,2.4,1.9c0.6,0.8,1,1.6,1.3,2.5
		c0.3,0.9,0.4,1.7,0.4,2.5V28.1z"></path>
      <path d="M285.1,48.6c0,0.5-0.1,0.9-0.3,1.3c-0.2,0.4-0.4,0.7-0.7,1c-0.3,0.3-0.6,0.5-1,0.7c-0.4,0.2-0.8,0.2-1.2,0.2
		c-0.4,0-0.8-0.1-1.2-0.2c-0.4-0.1-0.8-0.4-1.1-0.7l-23.2-24.2v24.7h-6.3V19c0-0.7,0.2-1.2,0.5-1.8c0.4-0.5,0.8-0.9,1.4-1.2
		c0.6-0.2,1.2-0.3,1.9-0.2s1.2,0.4,1.6,0.9l23.2,24.2V16.3h6.3V48.6z"></path>
</g>
</svg>

</a>

    </div>
    
    <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input="" id="search-by" type="search" placeholder="Search...">
</div>
<ul id="mySearchResults"></ul>


<script type="text/javascript">
    
        var baseurl = "https:\/\/labuladong.gitee.io";
    
</script>
<script type="text/javascript" src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/fastsearch.js.下载"></script>
<script type="text/javascript" src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/fuse.min.js.下载"></script>

    
  </div>
  
  <section id="homelinks">
    <ul>
      <li>
        <strong> <a style="text-align:center;" class="padding" href="https://labuladong.gitee.io/algo/"><i class="fas fa-home"></i> 本站阅读须知</a></strong>
      </li>
    </ul>
  </section>
  

  <div class="highlightable ps-container ps-theme-default ps-active-y" data-ps-id="c17da85b-648d-7f92-c5a5-02a18035ab50" style="height: 907.247px;">
    <ul class="topics">

      
      
      







<li data-nav-id="/1/" title="第零章、核心框架汇总" class="dd-item
        parent
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/1/"><strong>
    <i class="fas fa-check read-icon"></i>
    
    <b>▼ </b>第零章、核心框架汇总
    
  </strong></a>
  
  
  <ul>
    
    
    
    
    

    
    
    
    







<li data-nav-id="/1/2/" title="学习算法和刷题的框架思维" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/1/2/"><b style="float:right;opacity:initial;">🕒</b>
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>学习算法和刷题的框架思维
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/1/3/" title="我的刷题心得" class="dd-item visited">
  <a href="https://labuladong.gitee.io/algo/1/3/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>我的刷题心得
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/1/4/" title="双指针技巧秒杀七道链表题目" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/1/4/"><b style="float:right;opacity:initial;">🕒</b>
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>双指针技巧秒杀七道链表题目
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/1/5/" title="双指针技巧秒杀七道数组题目" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/1/5/"><b style="float:right;opacity:initial;">🕒</b>
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>双指针技巧秒杀七道数组题目
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/1/6/" title="东哥带你刷二叉树（纲领篇）" class="dd-item visited">
  <a href="https://labuladong.gitee.io/algo/1/6/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>东哥带你刷二叉树（纲领篇）
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/1/7/" title="动态规划解题套路框架" class="dd-item visited">
  <a href="https://labuladong.gitee.io/algo/1/7/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>动态规划解题套路框架
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/1/8/" title="回溯算法解题套路框架" class="dd-item visited">
  <a href="https://labuladong.gitee.io/algo/1/8/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>回溯算法解题套路框架
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/1/9/" title="回溯算法秒杀所有排列-组合-子集问题" class="dd-item visited">
  <a href="https://labuladong.gitee.io/algo/1/9/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>回溯算法秒杀所有排列-组合-子集问题
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/1/10/" title="BFS 算法解题套路框架" class="dd-item visited">
  <a href="https://labuladong.gitee.io/algo/1/10/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>BFS 算法解题套路框架
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/1/11/" title="我写了首诗，把二分搜索算法变成了默写题" class="dd-item visited">
  <a href="https://labuladong.gitee.io/algo/1/11/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>我写了首诗，把二分搜索算法变成了默写题
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/1/12/" title="我写了首诗，把滑动窗口算法变成了默写题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/1/12/"><b style="float:right;opacity:initial;">🕒</b>
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>我写了首诗，把滑动窗口算法变成了默写题
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/1/13/" title="一个方法团灭 LeetCode 股票买卖问题" class="dd-item
        parent
        active
        
        ">
  <a href="https://labuladong.gitee.io/algo/1/13/"><b style="float:right;opacity:initial;">🕒</b>
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>一个方法团灭 LeetCode 股票买卖问题
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/1/14/" title="一个方法团灭 LeetCode 打家劫舍问题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/1/14/"><b style="float:right;opacity:initial;">🕒</b>
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>一个方法团灭 LeetCode 打家劫舍问题
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/1/15/" title="一个方法团灭 nSum 问题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/1/15/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>一个方法团灭 nSum 问题
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/1/16/" title="算法时空复杂度分析实用指南" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/1/16/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>算法时空复杂度分析实用指南
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/1/17/" title="算法笔试「骗分」套路" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/1/17/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>算法笔试「骗分」套路
    
  </a>
  
  
</li>



    
    
    
  </ul>
  
</li>



      
      







<li data-nav-id="/2/" title="第一章、手把手刷数据结构" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/"><strong>
    <i class="fas fa-check read-icon"></i>
    
    <b>▼ </b>第一章、手把手刷数据结构
    
  </strong></a>
  
  
  <ul>
    
    
    
    
    

    
    
    
    







<li data-nav-id="/2/19/" title="手把手刷链表算法" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/19/"><strong>
    <i class="fas fa-check read-icon"></i>
    
    <b>▼ </b>手把手刷链表算法
    
  </strong></a>
  
  
  <ul>
    
    
    
    
    

    
    
    
    







<li data-nav-id="/2/19/18/" title="双指针技巧秒杀七道链表题目" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/19/18/"><b style="float:right;opacity:initial;">🕒</b>
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>双指针技巧秒杀七道链表题目
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/19/19/" title="递归魔法：反转单链表" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/19/19/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>递归魔法：反转单链表
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/19/20/" title="如何 K 个一组反转链表" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/19/20/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>如何 K 个一组反转链表
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/19/21/" title="如何判断回文链表" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/19/21/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>如何判断回文链表
    
  </a>
  
  
</li>



    
    
    
  </ul>
  
</li>



    
    
    
    







<li data-nav-id="/2/20/" title="手把手刷数组算法" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/20/"><strong>
    <i class="fas fa-check read-icon"></i>
    
    <b>▼ </b>手把手刷数组算法
    
  </strong></a>
  
  
  <ul>
    
    
    
    
    

    
    
    
    







<li data-nav-id="/2/20/23/" title="双指针技巧秒杀七道数组题目" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/20/23/"><b style="float:right;opacity:initial;">🕒</b>
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>双指针技巧秒杀七道数组题目
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/20/24/" title="小而美的算法技巧：前缀和数组" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/20/24/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>小而美的算法技巧：前缀和数组
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/20/25/" title="小而美的算法技巧：差分数组" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/20/25/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>小而美的算法技巧：差分数组
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/20/26/" title="二维数组的花式遍历技巧" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/20/26/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>二维数组的花式遍历技巧
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/20/27/" title="我写了首诗，把滑动窗口算法算法变成了默写题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/20/27/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>我写了首诗，把滑动窗口算法算法变成了默写题
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/20/28/" title="滑动窗口算法延伸：Rabin Karp 字符匹配算法" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/20/28/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>滑动窗口算法延伸：Rabin Karp 字符匹配算法
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/20/29/" title="我写了首诗，让你闭着眼睛也能写对二分搜索" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/20/29/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>我写了首诗，让你闭着眼睛也能写对二分搜索
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/20/30/" title="带权重的随机选择算法" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/20/30/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>带权重的随机选择算法
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/20/31/" title="二分搜索怎么用？我又总结了套路" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/20/31/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>二分搜索怎么用？我又总结了套路
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/20/32/" title="田忌赛马背后的算法决策" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/20/32/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>田忌赛马背后的算法决策
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/20/33/" title="常数时间删除-查找数组中的任意元素" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/20/33/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>常数时间删除-查找数组中的任意元素
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/20/34/" title="一道数组去重的算法题把我整不会了" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/20/34/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>一道数组去重的算法题把我整不会了
    
  </a>
  
  
</li>



    
    
    
  </ul>
  
</li>



    
    
    
    







<li data-nav-id="/2/21/" title="手把手刷二叉树算法" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/21/"><strong>
    <i class="fas fa-check read-icon"></i>
    
    <b>▼ </b>手把手刷二叉树算法
    
  </strong></a>
  
  
  <ul>
    
    
    
    
    

    
    
    
    







<li data-nav-id="/2/21/36/" title="东哥带你刷二叉树（纲领篇）" class="dd-item visited">
  <a href="https://labuladong.gitee.io/algo/2/21/36/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>东哥带你刷二叉树（纲领篇）
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/21/37/" title="东哥带你刷二叉树（思路篇）" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/21/37/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>东哥带你刷二叉树（思路篇）
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/21/38/" title="东哥带你刷二叉树（构造篇）" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/21/38/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>东哥带你刷二叉树（构造篇）
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/21/39/" title="东哥带你刷二叉树（序列化篇）" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/21/39/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>东哥带你刷二叉树（序列化篇）
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/21/40/" title="东哥带你刷二叉树（后序篇）" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/21/40/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>东哥带你刷二叉树（后序篇）
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/21/41/" title="归并排序详解及应用" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/21/41/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>归并排序详解及应用
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/21/42/" title="东哥带你刷二叉搜索树（特性篇）" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/21/42/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>东哥带你刷二叉搜索树（特性篇）
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/21/43/" title="东哥带你刷二叉搜索树（基操篇）" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/21/43/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>东哥带你刷二叉搜索树（基操篇）
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/21/44/" title="东哥带你刷二叉搜索树（构造篇）" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/21/44/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>东哥带你刷二叉搜索树（构造篇）
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/21/45/" title="快速排序详解及应用" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/21/45/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>快速排序详解及应用
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/21/46/" title="题目不让我干什么，我偏要干什么" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/21/46/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>题目不让我干什么，我偏要干什么
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/21/47/" title="Git原理之最近公共祖先" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/21/47/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>Git原理之最近公共祖先
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/21/48/" title="如何计算完全二叉树的节点数" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/21/48/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>如何计算完全二叉树的节点数
    
  </a>
  
  
</li>



    
    
    
  </ul>
  
</li>



    
    
    
    







<li data-nav-id="/2/22/" title="手把手刷图算法" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/22/"><strong>
    <i class="fas fa-check read-icon"></i>
    
    <b>▼ </b>手把手刷图算法
    
  </strong></a>
  
  
  <ul>
    
    
    
    
    

    
    
    
    







<li data-nav-id="/2/22/50/" title="图论基础及遍历算法" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/22/50/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>图论基础及遍历算法
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/22/51/" title="环检测及拓扑排序算法" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/22/51/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>环检测及拓扑排序算法
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/22/52/" title="二分图判定算法" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/22/52/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>二分图判定算法
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/22/53/" title="并查集（Union-Find）算法" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/22/53/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>并查集（Union-Find）算法
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/22/54/" title="Kruskal 最小生成树算法" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/22/54/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>Kruskal 最小生成树算法
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/22/55/" title="Prim 最小生成树算法" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/22/55/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>Prim 最小生成树算法
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/22/56/" title="Dijkstra 算法模板及应用" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/22/56/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>Dijkstra 算法模板及应用
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/22/57/" title="众里寻他千百度：名流问题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/22/57/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>众里寻他千百度：名流问题
    
  </a>
  
  
</li>



    
    
    
  </ul>
  
</li>



    
    
    
    







<li data-nav-id="/2/23/" title="手把手设计数据结构" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/23/"><strong>
    <i class="fas fa-check read-icon"></i>
    
    <b>▼ </b>手把手设计数据结构
    
  </strong></a>
  
  
  <ul>
    
    
    
    
    

    
    
    
    







<li data-nav-id="/2/23/59/" title="算法就像搭乐高：带你手撸 LRU 算法" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/23/59/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>算法就像搭乐高：带你手撸 LRU 算法
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/23/60/" title="算法就像搭乐高：带你手撸 LFU 算法" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/23/60/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>算法就像搭乐高：带你手撸 LFU 算法
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/23/61/" title="前缀树算法模板秒杀五道算法题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/23/61/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>前缀树算法模板秒杀五道算法题
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/23/62/" title="一道求中位数的算法题把我整不会了" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/23/62/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>一道求中位数的算法题把我整不会了
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/23/63/" title="单调栈结构解决三道算法题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/23/63/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>单调栈结构解决三道算法题
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/23/64/" title="单调队列结构解决滑动窗口问题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/23/64/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>单调队列结构解决滑动窗口问题
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/23/65/" title="二叉堆详解实现优先级队列" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/23/65/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>二叉堆详解实现优先级队列
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/23/66/" title="队列实现栈以及栈实现队列" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/23/66/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>队列实现栈以及栈实现队列
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/2/23/67/" title="设计朋友圈时间线功能" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/2/23/67/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>设计朋友圈时间线功能
    
  </a>
  
  
</li>



    
    
    
  </ul>
  
</li>



    
    
    
  </ul>
  
</li>



      
      







<li data-nav-id="/3/" title="第二章、手把手刷动态规划" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/"><strong>
    <i class="fas fa-check read-icon"></i>
    
    <b>▼ </b>第二章、手把手刷动态规划
    
  </strong></a>
  
  
  <ul>
    
    
    
    
    

    
    
    
    







<li data-nav-id="/3/25/" title="动态规划基本技巧" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/25/"><strong>
    <i class="fas fa-check read-icon"></i>
    
    <b>▼ </b>动态规划基本技巧
    
  </strong></a>
  
  
  <ul>
    
    
    
    
    

    
    
    
    







<li data-nav-id="/3/25/69/" title="动态规划解题套路框架" class="dd-item visited">
  <a href="https://labuladong.gitee.io/algo/3/25/69/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>动态规划解题套路框架
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/25/70/" title="动态规划设计：最长递增子序列" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/25/70/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>动态规划设计：最长递增子序列
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/25/71/" title="最优子结构原理和 dp 数组遍历方向" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/25/71/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>最优子结构原理和 dp 数组遍历方向
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/25/72/" title="base case 和备忘录的初始值怎么定？" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/25/72/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>base case 和备忘录的初始值怎么定？
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/25/73/" title="对动态规划进行降维打击" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/25/73/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>对动态规划进行降维打击
    
  </a>
  
  
</li>



    
    
    
  </ul>
  
</li>



    
    
    
    







<li data-nav-id="/3/26/" title="子序列类型问题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/26/"><strong>
    <i class="fas fa-check read-icon"></i>
    
    <b>▼ </b>子序列类型问题
    
  </strong></a>
  
  
  <ul>
    
    
    
    
    

    
    
    
    







<li data-nav-id="/3/26/75/" title="经典动态规划：编辑距离" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/26/75/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>经典动态规划：编辑距离
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/26/76/" title="动态规划设计：最长递增子序列" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/26/76/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>动态规划设计：最长递增子序列
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/26/77/" title="动态规划设计：最大子数组" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/26/77/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>动态规划设计：最大子数组
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/26/78/" title="经典动态规划：最长公共子序列" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/26/78/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>经典动态规划：最长公共子序列
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/26/79/" title="动态规划之子序列问题解题模板" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/26/79/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>动态规划之子序列问题解题模板
    
  </a>
  
  
</li>



    
    
    
  </ul>
  
</li>



    
    
    
    







<li data-nav-id="/3/27/" title="背包类型问题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/27/"><strong>
    <i class="fas fa-check read-icon"></i>
    
    <b>▼ </b>背包类型问题
    
  </strong></a>
  
  
  <ul>
    
    
    
    
    

    
    
    
    







<li data-nav-id="/3/27/81/" title="经典动态规划：0-1 背包问题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/27/81/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>经典动态规划：0-1 背包问题
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/27/82/" title="经典动态规划：子集背包问题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/27/82/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>经典动态规划：子集背包问题
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/27/83/" title="经典动态规划：完全背包问题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/27/83/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>经典动态规划：完全背包问题
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/27/84/" title="动态规划和回溯算法到底谁是谁爹？" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/27/84/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>动态规划和回溯算法到底谁是谁爹？
    
  </a>
  
  
</li>



    
    
    
  </ul>
  
</li>



    
    
    
    







<li data-nav-id="/3/28/" title="用动态规划玩游戏" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/28/"><strong>
    <i class="fas fa-check read-icon"></i>
    
    <b>▼ </b>用动态规划玩游戏
    
  </strong></a>
  
  
  <ul>
    
    
    
    
    

    
    
    
    







<li data-nav-id="/3/28/86/" title="动态规划之最小路径和" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/28/86/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>动态规划之最小路径和
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/28/87/" title="动态规划帮我通关了《魔塔》" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/28/87/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>动态规划帮我通关了《魔塔》
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/28/88/" title="动态规划帮我通关了《辐射4》" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/28/88/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>动态规划帮我通关了《辐射4》
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/28/89/" title="旅游省钱大法：加权最短路径" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/28/89/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>旅游省钱大法：加权最短路径
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/28/90/" title="经典动态规划：正则表达式" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/28/90/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>经典动态规划：正则表达式
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/28/91/" title="经典动态规划：高楼扔鸡蛋" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/28/91/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>经典动态规划：高楼扔鸡蛋
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/28/92/" title="经典动态规划：戳气球" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/28/92/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>经典动态规划：戳气球
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/28/93/" title="经典动态规划：博弈问题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/28/93/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>经典动态规划：博弈问题
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/28/94/" title="经典动态规划：四键键盘" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/28/94/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>经典动态规划：四键键盘
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/28/95/" title="一个方法团灭 LeetCode 打家劫舍问题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/28/95/"><b style="float:right;opacity:initial;">🕒</b>
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>一个方法团灭 LeetCode 打家劫舍问题
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/28/96/" title="一个方法团灭 LeetCode 股票买卖问题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/28/96/"><b style="float:right;opacity:initial;">🕒</b>
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>一个方法团灭 LeetCode 股票买卖问题
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/28/97/" title="有限状态机之 KMP 字符匹配算法" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/28/97/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>有限状态机之 KMP 字符匹配算法
    
  </a>
  
  
</li>



    
    
    
  </ul>
  
</li>



    
    
    
    







<li data-nav-id="/3/29/" title="贪心类型问题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/29/"><strong>
    <i class="fas fa-check read-icon"></i>
    
    <b>▼ </b>贪心类型问题
    
  </strong></a>
  
  
  <ul>
    
    
    
    
    

    
    
    
    







<li data-nav-id="/3/29/99/" title="贪心算法之区间调度问题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/29/99/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>贪心算法之区间调度问题
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/29/100/" title="扫描线技巧：安排会议室" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/29/100/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>扫描线技巧：安排会议室
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/29/101/" title="剪视频剪出一个贪心算法" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/29/101/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>剪视频剪出一个贪心算法
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/3/29/102/" title="如何运用贪心思想玩跳跃游戏" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/3/29/102/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>如何运用贪心思想玩跳跃游戏
    
  </a>
  
  
</li>



    
    
    
  </ul>
  
</li>



    
    
    
  </ul>
  
</li>



      
      







<li data-nav-id="/4/" title="第三章、必知必会算法技巧" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/"><strong>
    <i class="fas fa-check read-icon"></i>
    
    <b>▼ </b>第三章、必知必会算法技巧
    
  </strong></a>
  
  
  <ul>
    
    
    
    
    

    
    
    
    







<li data-nav-id="/4/31/" title="暴力搜索算法" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/31/"><strong>
    <i class="fas fa-check read-icon"></i>
    
    <b>▼ </b>暴力搜索算法
    
  </strong></a>
  
  
  <ul>
    
    
    
    
    

    
    
    
    







<li data-nav-id="/4/31/104/" title="回溯算法解题套路框架" class="dd-item visited">
  <a href="https://labuladong.gitee.io/algo/4/31/104/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>回溯算法解题套路框架
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/4/31/105/" title="经典回溯算法：集合划分问题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/31/105/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>经典回溯算法：集合划分问题
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/4/31/106/" title="回溯算法秒杀所有排列-组合-子集问题" class="dd-item visited">
  <a href="https://labuladong.gitee.io/algo/4/31/106/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>回溯算法秒杀所有排列-组合-子集问题
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/4/31/107/" title="一文秒杀所有岛屿题目" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/31/107/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>一文秒杀所有岛屿题目
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/4/31/108/" title="回溯算法最佳实践：解数独" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/31/108/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>回溯算法最佳实践：解数独
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/4/31/109/" title="回溯算法最佳实践：括号生成" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/31/109/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>回溯算法最佳实践：括号生成
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/4/31/110/" title="BFS 算法解题套路框架" class="dd-item visited">
  <a href="https://labuladong.gitee.io/algo/4/31/110/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>BFS 算法解题套路框架
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/4/31/111/" title="如何用 BFS 算法秒杀各种智力题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/31/111/"><b style="float:right;opacity:initial;">🕒</b>
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>如何用 BFS 算法秒杀各种智力题
    
  </a>
  
  
</li>



    
    
    
  </ul>
  
</li>



    
    
    
    







<li data-nav-id="/4/32/" title="数学运算技巧" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/32/"><strong>
    <i class="fas fa-check read-icon"></i>
    
    <b>▼ </b>数学运算技巧
    
  </strong></a>
  
  
  <ul>
    
    
    
    
    

    
    
    
    







<li data-nav-id="/4/32/113/" title="谈谈游戏中的随机算法" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/32/113/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>谈谈游戏中的随机算法
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/4/32/114/" title="常用的位操作" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/32/114/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>常用的位操作
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/4/32/115/" title="讲两道常考的阶乘算法题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/32/115/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>讲两道常考的阶乘算法题
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/4/32/116/" title="如何高效寻找素数" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/32/116/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>如何高效寻找素数
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/4/32/117/" title="如何高效进行模幂运算" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/32/117/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>如何高效进行模幂运算
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/4/32/118/" title="如何同时寻找缺失和重复的元素" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/32/118/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>如何同时寻找缺失和重复的元素
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/4/32/119/" title="一行代码就能解决的算法题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/32/119/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>一行代码就能解决的算法题
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/4/32/120/" title="几个反直觉的概率问题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/32/120/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>几个反直觉的概率问题
    
  </a>
  
  
</li>



    
    
    
  </ul>
  
</li>



    
    
    
    







<li data-nav-id="/4/33/" title="经典面试题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/33/"><strong>
    <i class="fas fa-check read-icon"></i>
    
    <b>▼ </b>经典面试题
    
  </strong></a>
  
  
  <ul>
    
    
    
    
    

    
    
    
    







<li data-nav-id="/4/33/122/" title="分治算法详解：运算优先级" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/33/122/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>分治算法详解：运算优先级
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/4/33/123/" title="一个方法解决三道区间问题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/33/123/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>一个方法解决三道区间问题
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/4/33/124/" title="谁能想到，斗地主也能玩出算法" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/33/124/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>谁能想到，斗地主也能玩出算法
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/4/33/125/" title="烧饼排序算法" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/33/125/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>烧饼排序算法
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/4/33/126/" title="字符串乘法计算" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/33/126/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>字符串乘法计算
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/4/33/127/" title="如何实现一个计算器" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/33/127/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>如何实现一个计算器
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/4/33/128/" title="如何高效解决接雨水问题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/33/128/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>如何高效解决接雨水问题
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/4/33/129/" title="如何解决括号相关的问题" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/33/129/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>如何解决括号相关的问题
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/4/33/130/" title="如何判定完美矩形" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/33/130/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>如何判定完美矩形
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/4/33/131/" title="如何调度考生的座位" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/33/131/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>如何调度考生的座位
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/4/33/132/" title="二分查找高效判定子序列" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/4/33/132/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>二分查找高效判定子序列
    
  </a>
  
  
</li>



    
    
    
  </ul>
  
</li>



    
    
    
  </ul>
  
</li>



      
      







<li data-nav-id="/5/" title="第四章、通用计算机技术" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/5/"><strong>
    <i class="fas fa-check read-icon"></i>
    
    <b>▼ </b>第四章、通用计算机技术
    
  </strong></a>
  
  
  <ul>
    
    
    
    
    

    
    
    
    







<li data-nav-id="/5/35/" title="Linux 文件系统都是什么鬼" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/5/35/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>Linux 文件系统都是什么鬼
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/5/36/" title="Linux 的进程-线程-文件描述符是什么" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/5/36/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>Linux 的进程-线程-文件描述符是什么
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/5/37/" title="关于 Linux shell 你必须知道的" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/5/37/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>关于 Linux shell 你必须知道的
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/5/38/" title="Linux 管道和重定向的坑" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/5/38/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>Linux 管道和重定向的坑
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/5/39/" title="一文看懂 session 和 cookie" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/5/39/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>一文看懂 session 和 cookie
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/5/40/" title="加密算法的前身今世" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/5/40/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>加密算法的前身今世
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/5/41/" title="我用四个命令概括了 Git 的所有套路" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/5/41/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>我用四个命令概括了 Git 的所有套路
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/5/42/" title="Git-SQL-正则表达式的在线练习平台" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/5/42/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>Git-SQL-正则表达式的在线练习平台
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/5/43/" title="消息队列架构设计演进" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/5/43/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>消息队列架构设计演进
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/5/44/" title="存储系统设计之 LSM 树原理" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/5/44/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>存储系统设计之 LSM 树原理
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/5/45/" title="用消息队列制作一款多人在线游戏" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/5/45/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>用消息队列制作一款多人在线游戏
    
  </a>
  
  
</li>



    
    
    
    







<li data-nav-id="/5/46/" title="拥抱开源，告别 CRUD" class="dd-item
        
        
        
        ">
  <a href="https://labuladong.gitee.io/algo/5/46/">
    <i class="fas fa-check read-icon"></i>
    
    <b>▸ </b>拥抱开源，告别 CRUD
    
  </a>
  
  
</li>



    
    
    
  </ul>
  
</li>



      
      
    </ul>

    
    
    <section id="shortcuts">
      <h3>More</h3>
      <ul>
        
        <li>
          <a class="padding" target="_blank" href="https://mp.weixin.qq.com/s/X-fE9sR4BLi6T9pn7xP4pg">配套 PDF 和插件下载</a>
        </li>
        
        <li>
          <a class="padding" target="_blank" href="https://github.com/labuladong/fucking-algorithm"><i class="fab fa-github"></i> GitHub fucking-algorithm</a>
        </li>
        
        <li>
          <a class="padding" target="_blank" href="https://gitee.com/labuladong/fucking-algorithm"><i class="fab fa-git"></i> Gitee fucking-algorithm</a>
        </li>
        
        <li>
          <a class="padding" target="_blank" href="https://space.bilibili.com/14089380">B站 @labuladong</a>
        </li>
        
      </ul>
    </section>
    

    
    <section id="prefooter">
      <hr>
      <ul>
        

        
        

        
        <li><a class="padding" href="https://labuladong.gitee.io/algo/1/13/#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> 清除阅读历史</a></li>
        
      </ul>
    </section>
    
    <section id="footer">
      <center>

    
    

    
    <span></span>

    
    <span></span>

    <p><i class="fas fa-heart"></i> 给我点个 star <i class="fas fa-heart"></i></p>

    <br>
    <br>
</center>

<script async="" defer="" src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/buttons.js.下载"></script>
    </section>
  <div class="ps-scrollbar-x-rail" style="left: 0px; bottom: 0px;"><div class="ps-scrollbar-x" tabindex="0" style="left: 0px; width: 0px;"></div></div><div class="ps-scrollbar-y-rail" style="top: 0px; right: 0px; height: 907px;"><div class="ps-scrollbar-y" tabindex="0" style="top: 0px; height: 643px;"></div></div></div>
</nav>

<script>
  
  $('#sidebar a').each(function () {
    
    if ($(this).text().includes('▼')) {
        $(this).wrapInner("<strong></strong>");
    }
  })
</script>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar-sticky-wrapper" class="sticky-wrapper" style="height: 48px;"><div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="https://labuladong.gitee.io/algo/1/13/#" id="sidebar-toggle" data-sidebar-toggle="" class="highlight">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href="https://labuladong.gitee.io/algo/" class="highlight">labuladong 的算法小抄</a> &gt; <a href="https://labuladong.gitee.io/algo/1/" class="highlight">第零章、核心框架汇总</a> &gt; 一个方法团灭 LeetCode 股票买卖问题
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="https://labuladong.gitee.io/algo/1/13/#%E4%B8%80%E7%A9%B7%E4%B8%BE%E6%A1%86%E6%9E%B6" class="highlight">一、穷举框架</a></li>
        <li><a href="https://labuladong.gitee.io/algo/1/13/#%E4%BA%8C%E7%8A%B6%E6%80%81%E8%BD%AC%E7%A7%BB%E6%A1%86%E6%9E%B6" class="highlight">二、状态转移框架</a></li>
        <li><a href="https://labuladong.gitee.io/algo/1/13/#%E4%B8%89%E7%A7%92%E6%9D%80%E9%A2%98%E7%9B%AE" class="highlight">三、秒杀题目</a></li>
        <li><a href="https://labuladong.gitee.io/algo/1/13/#%E4%B8%87%E6%B3%95%E5%BD%92%E4%B8%80" class="highlight">万法归一</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
                
                <span class="anchor" style="position: relative;
                  top: 20%; float: right;
                  height: auto; font-size: initial;
                  visibility: initial; padding-right: 0;" data-clipboard-text="https://labuladong.gitee.io/article/fname.html?fname=团灭股票问题">

                  <i class="fas fa-link fa-lg"></i>
                </span>
              </div></div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner" style="max-height: initial;">
          
          <div id="read_all_wrapper" style="display: none;">
              <div id="read_all_mask"></div>
              <a id="read_all_btn" target="_self" style="line-height: 36px;" class="highlight">阅读全文</a>
          </div>

          <div id="guiding_popup_wrapper">
            <div id="guiding_popup_mask"></div>
            <div id="guiding_popup_div">
              <span id="guiding_popup_div_close_btn">×</span>
              <p id="guiding_popup_div_header">
                由于本站访问压力较大<br>
                微信扫码关注公众号 <strong>labuladong</strong><br>
                回复关键词「<strong>解锁</strong>」<br>
                按照操作即可解锁本站全部文章<br>
              </p>
              <a href="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/qrcode.jpg" data-featherlight="image"><img style="margin: 2rem auto;" src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/qrcode.jpg" alt="公众号"></a>
            </div>
          </div>

          
            <h1>
              
              一个方法团灭 LeetCode 股票买卖问题
            </h1><p align="center"><a href="https://github.com/labuladong/fucking-algorithm" target="_blank"><img class="my_header_icon" alt="GitHub" src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/fucking-algorithm"></a><a href="https://space.bilibili.com/14089380" target="_blank"><img class="my_header_icon" src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/B站-@labuladong-000000.svg"></a><a href="https://mp.weixin.qq.com/s/X-fE9sR4BLi6T9pn7xP4pg" target="_blank"><img class="my_header_icon" src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/v1"></a><a href="https://mp.weixin.qq.com/s/eUG2OOzY3k_ZTz-CFvtv5Q" target="_blank"><img class="my_header_icon" src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/v1(1)"></a><a href="https://appktavsiei5995.pc.xiaoe-tech.com/index" target="_blank"><img class="my_header_icon" src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/v1(2)"></a></p>
          

          
        



	<div id="wx_slug" data="4nqJMIyCKQD7IJ-HI6S3Vg"></div>
<div id="cmt_number" data="851"></div>
<div id="discuss_number" data="1012"></div>
<figure><a href="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/souyisou1.png" data-featherlight="image"><img src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/souyisou1.png" class="shadow myimage souyisou_pic"></a>
</figure>
<p><strong>通知：

<a href="https://aep.h5.xeknow.com/s/1XJHEO" target="_blank" rel="noopener" class="highlight">数据结构精品课</a> 已更新到 V2.0；

<a href="https://mp.weixin.qq.com/s/eUG2OOzY3k_ZTz-CFvtv5Q" target="_blank" rel="noopener" class="highlight">第 13 期刷题打卡</a> 最后几天报名！</strong></p>
<p>读完本文，你不仅学会了算法套路，还可以顺便解决如下题目：</p>
<table>
<thead>
<tr>
<th style="text-align:center">LeetCode</th>
<th style="text-align:center">力扣</th>
<th style="text-align:center">难度</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">

<a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock/" target="_blank" rel="noopener" class="highlight">121. Best Time to Buy and Sell Stock</a></td>
<td style="text-align:center">

<a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/" target="_blank" rel="noopener" class="highlight">121. 买卖股票的最佳时机</a></td>
<td style="text-align:center">🟢</td>
</tr>
<tr>
<td style="text-align:center">

<a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-ii/" target="_blank" rel="noopener" class="highlight">122. Best Time to Buy and Sell Stock II</a></td>
<td style="text-align:center">

<a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-ii/" target="_blank" rel="noopener" class="highlight">122. 买卖股票的最佳时机 II</a></td>
<td style="text-align:center">🟠</td>
</tr>
<tr>
<td style="text-align:center">

<a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iii/" target="_blank" rel="noopener" class="highlight">123. Best Time to Buy and Sell Stock III</a></td>
<td style="text-align:center">

<a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iii/" target="_blank" rel="noopener" class="highlight">123. 买卖股票的最佳时机 III</a></td>
<td style="text-align:center">🔴</td>
</tr>
<tr>
<td style="text-align:center">

<a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iv/" target="_blank" rel="noopener" class="highlight">188. Best Time to Buy and Sell Stock IV</a></td>
<td style="text-align:center">

<a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/" target="_blank" rel="noopener" class="highlight">188. 买卖股票的最佳时机 IV</a></td>
<td style="text-align:center">🔴</td>
</tr>
<tr>
<td style="text-align:center">

<a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/" target="_blank" rel="noopener" class="highlight">309. Best Time to Buy and Sell Stock with Cooldown</a></td>
<td style="text-align:center">

<a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/" target="_blank" rel="noopener" class="highlight">309. 最佳买卖股票时机含冷冻期</a></td>
<td style="text-align:center">🟠</td>
</tr>
<tr>
<td style="text-align:center">

<a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/" target="_blank" rel="noopener" class="highlight">714. Best Time to Buy and Sell Stock with Transaction Fee</a></td>
<td style="text-align:center">

<a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/" target="_blank" rel="noopener" class="highlight">714. 买卖股票的最佳时机含手续费</a></td>
<td style="text-align:center">🟠</td>
</tr>
<tr>
<td style="text-align:center">-</td>
<td style="text-align:center">

<a href="https://leetcode.cn/problems/gu-piao-de-zui-da-li-run-lcof/" target="_blank" rel="noopener" class="highlight">剑指 Offer 63. 股票的最大利润</a></td>
<td style="text-align:center">🟠</td>
</tr>
</tbody>
</table>
<p><strong>———–</strong></p>
<p>很多读者抱怨力扣上的股票系列问题奇技淫巧太多，如果面试真的遇到这类问题，基本不会想到那些巧妙的办法，怎么办？<strong>所以本文拒绝奇技淫巧，而是稳扎稳打，只用一种通用方法解决所用问题，以不变应万变</strong>。</p>
<p>这篇文章参考 

<a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/discuss/108870/Most-consistent-ways-of-dealing-with-the-series-of-stock-problems" target="_blank" rel="noopener" class="highlight">英文版高赞题解</a> 的思路，用状态机的技巧来解决，可以全部提交通过。不要觉得这个名词高大上，文学词汇而已，实际上就是 DP table，看一眼就明白了。</p>
<p>先随便抽出一道题，看看别人的解法：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp hljs" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span style="color:#00a000"><span class="hljs-function"><span class="hljs-title">maxProfit</span></span></span><span class="hljs-function"><span class="hljs-params">(<span class="hljs-built_in">vector</span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">&lt;</span></span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">&gt;&amp;</span></span></span><span class="hljs-function"><span class="hljs-params"> prices)</span> </span>{
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">if</span></span>(prices.empty()) <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">return</span></span> <span style="color:#666"><span class="hljs-number">0</span></span>;
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> s1 <span style="color:#666">=</span> <span style="color:#666">-</span>prices[<span style="color:#666"><span class="hljs-number">0</span></span>], s2 <span style="color:#666">=</span> INT_MIN, s3 <span style="color:#666">=</span> INT_MIN, s4 <span style="color:#666">=</span> INT_MIN;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span>(<span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> i <span style="color:#666">=</span> <span style="color:#666"><span class="hljs-number">1</span></span>; i <span style="color:#666">&lt;</span> prices.size(); <span style="color:#666">++</span>i) {            
</span></span><span style="display:flex;"><span>        s1 <span style="color:#666">=</span> max(s1, <span style="color:#666">-</span>prices[i]);
</span></span><span style="display:flex;"><span>        s2 <span style="color:#666">=</span> max(s2, s1 <span style="color:#666">+</span> prices[i]);
</span></span><span style="display:flex;"><span>        s3 <span style="color:#666">=</span> max(s3, s2 <span style="color:#666">-</span> prices[i]);
</span></span><span style="display:flex;"><span>        s4 <span style="color:#666">=</span> max(s4, s3 <span style="color:#666">+</span> prices[i]);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">return</span></span> max(<span style="color:#666"><span class="hljs-number">0</span></span>, s4);
</span></span><span style="display:flex;"><span>}
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p>能看懂吧？会做了吗？不可能的，你看不懂，这才正常。就算你勉强看懂了，下一个问题你还是做不出来。为什么别人能写出这么诡异却又高效的解法呢？因为这类问题是有框架的，但是人家不会告诉你的，因为一旦告诉你，你五分钟就学会了，该算法题就不再神秘，变得不堪一击了。</p>
<p>本文就来告诉你这个框架，然后带着你一道一道秒杀。这篇文章用状态机的技巧来解决，可以全部提交通过。不要觉得这个名词高大上，文学词汇而已，实际上就是 DP table，看一眼就明白了。</p>
<p>这 6 道题目是有共性的，我们只需要抽出来力扣第 188 题「

<a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/" target="_blank" rel="noopener" class="highlight">买卖股票的最佳时机 IV</a>」进行研究，因为这道题是最泛化的形式，其他的问题都是这个形式的简化，看下题目：</p>
<figure><a href="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/title.png" data-featherlight="image"><img src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/title.png" class="shadow myimage"></a>
</figure>
<p>第一题是只进行一次交易，相当于 <code>k = 1</code>；第二题是不限交易次数，相当于 <code>k = +infinity</code><span class="copy-to-clipboard" title="Copy to clipboard"></span>（正无穷）；第三题是只进行 2 次交易，相当于 <code>k = 2</code>；剩下两道也是不限次数，但是加了交易「冷冻期」和「手续费」的额外条件，其实就是第二题的变种，都很容易处理。</p>
<p>下面言归正传，开始解题。</p>
<h3 id="一穷举框架">一、穷举框架 <span class="anchor" data-clipboard-text="https://labuladong.gitee.io/algo/1/13/#一穷举框架"><i class="fas fa-link fa-lg"></i></span></h3>
<p>首先，还是一样的思路：如何穷举？</p>
<p>

<a href="https://labuladong.gitee.io/algo/3/25/69/" target="_blank" rel="noopener" class="highlight">动态规划核心套路</a> 说过，动态规划算法本质上就是穷举「状态」，然后在「选择」中选择最优解。</p>
<p>那么对于这道题，我们具体到每一天，看看总共有几种可能的「状态」，再找出每个「状态」对应的「选择」。我们要穷举所有「状态」，穷举的目的是根据对应的「选择」更新状态。听起来抽象，你只要记住「状态」和「选择」两个词就行，下面实操一下就很容易明白了。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python hljs" data-lang="python"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> 状态<span class="hljs-number">1</span> <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">in</span></span> 状态<span class="hljs-number">1</span>的所有取值<span style="">：</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> 状态<span class="hljs-number">2</span> <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">in</span></span> 状态<span class="hljs-number">2</span>的所有取值<span style="">：</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> <span style="color:#666">...</span>
</span></span><span style="display:flex;"><span>            dp[状态<span class="hljs-number">1</span>][状态<span class="hljs-number">2</span>][<span style="color:#666">...</span>] <span style="color:#666">=</span> 择优(选择<span class="hljs-number">1</span><span style="">，</span>选择<span class="hljs-number">2</span><span style="color:#666"><span class="hljs-number">.</span>..</span>)
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p>比如说这个问题，<strong>每天都有三种「选择」</strong>：买入、卖出、无操作，我们用 <code>buy</code>, <code>sell</code>, <code>rest</code> 表示这三种选择。</p>
<p>但问题是，并不是每天都可以任意选择这三种选择的，因为 <code>sell</code> 必须在 <code>buy</code> 之后，<code>buy</code> 必须在 <code>sell</code> 之后。那么 <code>rest</code> 操作还应该分两种状态，一种是 <code>buy</code> 之后的 <code>rest</code>（持有了股票），一种是 <code>sell</code> 之后的 <code>rest</code>（没有持有股票）。而且别忘了，我们还有交易次数 <code>k</code> 的限制，就是说你 <code>buy</code> 还只能在 <code>k &gt; 0</code> 的前提下操作。</p>
<p>很复杂对吧，不要怕，我们现在的目的只是穷举，你有再多的状态，老夫要做的就是一把梭全部列举出来。</p>
<p><strong>这个问题的「状态」有三个</strong>，第一个是天数，第二个是允许交易的最大次数，第三个是当前的持有状态（即之前说的 <code>rest</code> 的状态，我们不妨用 1 表示持有，0 表示没有持有）。然后我们用一个三维数组就可以装下这几种状态的全部组合：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python hljs" data-lang="python"><span style="display:flex;"><span>dp[i][k][<span style="color:#666"><span class="hljs-number">0</span></span> <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">or</span></span> <span style="color:#666"><span class="hljs-number">1</span></span>]
</span></span><span style="display:flex;"><span><span style="color:#666"><span class="hljs-number">0</span></span> <span style="color:#666">&lt;=</span> i <span style="color:#666">&lt;=</span> n <span style="color:#666">-</span> <span style="color:#666"><span class="hljs-number">1</span></span>, <span style="color:#666"><span class="hljs-number">1</span></span> <span style="color:#666">&lt;=</span> k <span style="color:#666">&lt;=</span> K
</span></span><span style="display:flex;"><span>n 为天数<span style="">，</span>大 K 为交易数的上限<span style="">，</span><span style="color:#666"><span class="hljs-number">0</span></span> 和 <span style="color:#666"><span class="hljs-number">1</span></span> 代表是否持有股票<span style="">。</span>
</span></span><span style="display:flex;"><span>此问题共 n <span style="">×</span> K <span style="">×</span> <span style="color:#666"><span class="hljs-number">2</span></span> 种状态<span style="">，</span>全部穷举就能搞定<span style="">。</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> <span style="color:#666"><span class="hljs-number">0</span></span> <span style="color:#666">&lt;=</span> i <span style="color:#666">&lt;</span> n:
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> <span style="color:#666"><span class="hljs-number">1</span></span> <span style="color:#666">&lt;=</span> k <span style="color:#666">&lt;=</span> K:
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> s <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">in</span></span> {<span style="color:#666"><span class="hljs-number">0</span></span>, <span style="color:#666"><span class="hljs-number">1</span></span>}:
</span></span><span style="display:flex;"><span>            dp[i][k][s] <span style="color:#666">=</span> <span style="color:#a2f">max</span>(buy, sell, rest)
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p>而且我们可以用自然语言描述出每一个状态的含义，比如说 <code>dp[3][2][1]</code><span class="copy-to-clipboard" title="Copy to clipboard"></span> 的含义就是：今天是第三天，我现在手上持有着股票，至今最多进行 2 次交易。再比如 <code>dp[2][3][0]</code><span class="copy-to-clipboard" title="Copy to clipboard"></span> 的含义：今天是第二天，我现在手上没有持有股票，至今最多进行 3 次交易。很容易理解，对吧？</p>
<p>我们想求的最终答案是 <code>dp[n - 1][K][0]</code><span class="copy-to-clipboard" title="Copy to clipboard"></span>，即最后一天，最多允许 <code>K</code> 次交易，最多获得多少利润。</p>
<p>读者可能问为什么不是 <code>dp[n - 1][K][1]</code><span class="copy-to-clipboard" title="Copy to clipboard"></span>？因为 <code>dp[n - 1][K][1]</code><span class="copy-to-clipboard" title="Copy to clipboard"></span> 代表到最后一天手上还持有股票，<code>dp[n - 1][K][0]</code><span class="copy-to-clipboard" title="Copy to clipboard"></span> 表示最后一天手上的股票已经卖出去了，很显然后者得到的利润一定大于前者。</p>
<p>记住如何解释「状态」，一旦你觉得哪里不好理解，把它翻译成自然语言就容易理解了。</p>
<h3 id="二状态转移框架">二、状态转移框架 <span class="anchor" data-clipboard-text="https://labuladong.gitee.io/algo/1/13/#二状态转移框架"><i class="fas fa-link fa-lg"></i></span></h3>
<p>现在，我们完成了「状态」的穷举，我们开始思考每种「状态」有哪些「选择」，应该如何更新「状态」。</p>
<p>只看「持有状态」，可以画个状态转移图：</p>
<figure><a href="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/1.png" data-featherlight="image"><img src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/1.png" class="shadow myimage"></a>
</figure>
<p>通过这个图可以很清楚地看到，每种状态（0 和 1）是如何转移而来的。根据这个图，我们来写一下状态转移方程：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python hljs" data-lang="python"><span style="display:flex;"><span>dp[i][k][<span style="color:#666"><span class="hljs-number">0</span></span>] <span style="color:#666">=</span> <span style="color:#a2f">max</span>(dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][k][<span style="color:#666"><span class="hljs-number">0</span></span>], dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][k][<span style="color:#666"><span class="hljs-number">1</span></span>] <span style="color:#666">+</span> prices[i])
</span></span><span style="display:flex;"><span>              <span style="color:#a2f">max</span>( 今天选择 rest,        今天选择 sell       )
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p>解释：今天我没有持有股票，有两种可能，我从这两种可能中求最大利润：</p>
<p>1、我昨天就没有持有，且截至昨天最大交易次数限制为 <code>k</code>；然后我今天选择 <code>rest</code>，所以我今天还是没有持有，最大交易次数限制依然为 <code>k</code>。</p>
<p>2、我昨天持有股票，且截至昨天最大交易次数限制为 <code>k</code>；但是今天我 <code>sell</code> 了，所以我今天没有持有股票了，最大交易次数限制依然为 <code>k</code>。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python hljs" data-lang="python"><span style="display:flex;"><span>dp[i][k][<span style="color:#666"><span class="hljs-number">1</span></span>] <span style="color:#666">=</span> <span style="color:#a2f">max</span>(dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][k][<span style="color:#666"><span class="hljs-number">1</span></span>], dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][k<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">0</span></span>] <span style="color:#666">-</span> prices[i])
</span></span><span style="display:flex;"><span>              <span style="color:#a2f">max</span>( 今天选择 rest,         今天选择 buy         )
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p>解释：今天我持有着股票，最大交易次数限制为 <code>k</code>，那么对于昨天来说，有两种可能，我从这两种可能中求最大利润：</p>
<p>1、我昨天就持有着股票，且截至昨天最大交易次数限制为 <code>k</code>；然后今天选择 <code>rest</code>，所以我今天还持有着股票，最大交易次数限制依然为 <code>k</code>。</p>
<p>2、我昨天本没有持有，且截至昨天最大交易次数限制为 <code>k - 1</code>；但今天我选择 <code>buy</code>，所以今天我就持有股票了，最大交易次数限制为 <code>k</code>。</p>
<blockquote>
<p>这里着重提醒一下，<strong>时刻牢记「状态」的定义</strong>，状态 <code>k</code> 的定义并不是「已进行的交易次数」，而是「最大交易次数的上限限制」。如果确定今天进行一次交易，且要保证截至今天最大交易次数上限为 <code>k</code>，那么昨天的最大交易次数上限必须是 <code>k - 1</code>。</p>
</blockquote>
<p>这个解释应该很清楚了，如果 <code>buy</code>，就要从利润中减去 <code>prices[i]</code><span class="copy-to-clipboard" title="Copy to clipboard"></span>，如果 <code>sell</code>，就要给利润增加 <code>prices[i]</code><span class="copy-to-clipboard" title="Copy to clipboard"></span>。今天的最大利润就是这两种可能选择中较大的那个。</p>
<p>注意 <code>k</code> 的限制，在选择 <code>buy</code> 的时候相当于开启了一次交易，那么对于昨天来说，交易次数的上限 <code>k</code> 应该减小 1。</p>
<blockquote>
<p>修正：以前我以为在 <code>sell</code> 的时候给 <code>k</code> 减小 1 和在 <code>buy</code> 的时候给 <code>k</code> 减小 1 是等效的，但细心的读者向我提出质疑，经过深入思考我发现前者确实是错误的，因为交易是从 <code>buy</code> 开始，如果 <code>buy</code> 的选择不改变交易次数 <code>k</code> 的话，会出现交易次数超出限制的的错误。</p>
</blockquote>
<p>现在，我们已经完成了动态规划中最困难的一步：状态转移方程。<strong>如果之前的内容你都可以理解，那么你已经可以秒杀所有问题了，只要套这个框架就行了</strong>。不过还差最后一点点，就是定义 base case，即最简单的情况。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python hljs" data-lang="python"><span style="display:flex;"><span>dp[<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666">...</span>][<span style="color:#666"><span class="hljs-number">0</span></span>] <span style="color:#666">=</span> <span style="color:#666"><span class="hljs-number">0</span></span>
</span></span><span style="display:flex;"><span>解释<span style="">：</span>因为 i 是从 <span style="color:#666"><span class="hljs-number">0</span></span> 开始的<span style="">，</span>所以 i <span style="color:#666">=</span> <span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span> 意味着还没有开始<span style="">，</span>这时候的利润当然是 <span style="color:#666"><span class="hljs-number">0</span></span><span style="">。</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>dp[<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666">...</span>][<span style="color:#666"><span class="hljs-number">1</span></span>] <span style="color:#666">=</span> <span style="color:#666">-</span>infinity
</span></span><span style="display:flex;"><span>解释<span style="">：</span>还没开始的时候<span style="">，</span>是不可能持有股票的<span style="">。</span>
</span></span><span style="display:flex;"><span>因为我们的算法要求一个最大值<span style="">，</span>所以初始值设为一个最小值<span style="">，</span>方便取最大值<span style="">。</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>dp[<span style="color:#666">...</span>][<span style="color:#666"><span class="hljs-number">0</span></span>][<span style="color:#666"><span class="hljs-number">0</span></span>] <span style="color:#666">=</span> <span style="color:#666"><span class="hljs-number">0</span></span>
</span></span><span style="display:flex;"><span>解释<span style="">：</span>因为 k 是从 <span style="color:#666"><span class="hljs-number">1</span></span> 开始的<span style="">，</span>所以 k <span style="color:#666">=</span> <span style="color:#666"><span class="hljs-number">0</span></span> 意味着根本不允许交易<span style="">，</span>这时候利润当然是 <span style="color:#666"><span class="hljs-number">0</span></span><span style="">。</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>dp[<span style="color:#666">...</span>][<span style="color:#666"><span class="hljs-number">0</span></span>][<span style="color:#666"><span class="hljs-number">1</span></span>] <span style="color:#666">=</span> <span style="color:#666">-</span>infinity
</span></span><span style="display:flex;"><span>解释<span style="">：</span>不允许交易的情况下<span style="">，</span>是不可能持有股票的<span style="">。</span>
</span></span><span style="display:flex;"><span>因为我们的算法要求一个最大值<span style="">，</span>所以初始值设为一个最小值<span style="">，</span>方便取最大值<span style="">。</span>
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p>把上面的状态转移方程总结一下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python hljs" data-lang="python"><span style="display:flex;"><span>base case<span style="">：</span>
</span></span><span style="display:flex;"><span>dp[<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666">...</span>][<span style="color:#666"><span class="hljs-number">0</span></span>] <span style="color:#666">=</span> dp[<span style="color:#666">...</span>][<span style="color:#666"><span class="hljs-number">0</span></span>][<span style="color:#666"><span class="hljs-number">0</span></span>] <span style="color:#666">=</span> <span style="color:#666"><span class="hljs-number">0</span></span>
</span></span><span style="display:flex;"><span>dp[<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666">...</span>][<span style="color:#666"><span class="hljs-number">1</span></span>] <span style="color:#666">=</span> dp[<span style="color:#666">...</span>][<span style="color:#666"><span class="hljs-number">0</span></span>][<span style="color:#666"><span class="hljs-number">1</span></span>] <span style="color:#666">=</span> <span style="color:#666">-</span>infinity
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>状态转移方程<span style="">：</span>
</span></span><span style="display:flex;"><span>dp[i][k][<span style="color:#666"><span class="hljs-number">0</span></span>] <span style="color:#666">=</span> <span style="color:#a2f">max</span>(dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][k][<span style="color:#666"><span class="hljs-number">0</span></span>], dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][k][<span style="color:#666"><span class="hljs-number">1</span></span>] <span style="color:#666">+</span> prices[i])
</span></span><span style="display:flex;"><span>dp[i][k][<span style="color:#666"><span class="hljs-number">1</span></span>] <span style="color:#666">=</span> <span style="color:#a2f">max</span>(dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][k][<span style="color:#666"><span class="hljs-number">1</span></span>], dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][k<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">0</span></span>] <span style="color:#666">-</span> prices[i])
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p>读者可能会问，这个数组索引是 -1 怎么编程表示出来呢，负无穷怎么表示呢？这都是细节问题，有很多方法实现。现在完整的框架已经完成，下面开始具体化。</p>
<h3 id="三秒杀题目">三、秒杀题目 <span class="anchor" data-clipboard-text="https://labuladong.gitee.io/algo/1/13/#三秒杀题目"><i class="fas fa-link fa-lg"></i></span></h3>
<p><strong>第一题，先说力扣第 121 题「

<a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/" target="_blank" rel="noopener" class="highlight">买卖股票的最佳时机</a>」，相当于 <code>k = 1</code> 的情况</strong>：</p>
<figure><a href="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/title1.png" data-featherlight="image"><img src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/title1.png" class="shadow myimage"></a>
</figure>
<p>直接套状态转移方程，根据 base case，可以做一些化简：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python hljs" data-lang="python"><span style="display:flex;"><span>dp[i][<span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">0</span></span>] <span style="color:#666">=</span> <span style="color:#a2f">max</span>(dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">0</span></span>], dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">1</span></span>] <span style="color:#666">+</span> prices[i])
</span></span><span style="display:flex;"><span>dp[i][<span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">1</span></span>] <span style="color:#666">=</span> <span style="color:#a2f">max</span>(dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">1</span></span>], dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">0</span></span>][<span style="color:#666"><span class="hljs-number">0</span></span>] <span style="color:#666">-</span> prices[i]) 
</span></span><span style="display:flex;"><span>            <span style="color:#666">=</span> <span style="color:#a2f">max</span>(dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">1</span></span>], <span style="color:#666">-</span>prices[i])
</span></span><span style="display:flex;"><span>解释<span style="">：</span>k <span style="color:#666">=</span> <span style="color:#666"><span class="hljs-number">0</span></span> 的 base case<span style="">，</span>所以 dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">0</span></span>][<span style="color:#666"><span class="hljs-number">0</span></span>] <span style="color:#666">=</span> <span style="color:#666"><span class="hljs-number">0</span></span><span style="">。</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>现在发现 k 都是 <span style="color:#666"><span class="hljs-number">1</span></span><span style="">，</span>不会改变<span style="">，</span>即 k 对状态转移已经没有影响了<span style="">。</span>
</span></span><span style="display:flex;"><span>可以进行进一步化简去掉所有 k<span style="">：</span>
</span></span><span style="display:flex;"><span>dp[i][<span style="color:#666"><span class="hljs-number">0</span></span>] <span style="color:#666">=</span> <span style="color:#a2f">max</span>(dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">0</span></span>], dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">1</span></span>] <span style="color:#666">+</span> prices[i])
</span></span><span style="display:flex;"><span>dp[i][<span style="color:#666"><span class="hljs-number">1</span></span>] <span style="color:#666">=</span> <span style="color:#a2f">max</span>(dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">1</span></span>], <span style="color:#666">-</span>prices[i])
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p>直接写出代码：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java hljs" data-lang="java"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> n <span style="color:#666">=</span> prices<span style="color:#666">.</span><span style="color:#b44">length</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span><span style="color:#666">[][]</span> dp <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">new</span></span> <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span><span style="color:#666">[</span>n<span style="color:#666">][</span><span class="hljs-number">2</span><span style="color:#666">];</span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> <span style="color:#666">(</span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> i <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span> i <span style="color:#666">&lt;</span> n<span style="color:#666">;</span> i<span style="color:#666">++)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>    dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">],</span> dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">+</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>    dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">],</span> <span style="color:#666">-</span>prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span><span style="color:#666">}</span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">return</span></span> dp<span style="color:#666">[</span>n <span style="color:#666">-</span> <span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">];</span>
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p>显然 <code>i = 0</code> 时 <code>i - 1</code> 是不合法的索引，这是因为我们没有对 <code>i</code> 的 base case 进行处理，可以这样给一个特化处理：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java hljs" data-lang="java"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">if</span></span> <span style="color:#666">(</span>i <span style="color:#666">-</span> <span class="hljs-number">1</span> <span style="color:#666">==</span> <span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>    dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic"><span class="hljs-comment">// 根据状态转移方程可得：</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#080;font-style:italic"><span class="hljs-comment">//   dp[i][0] </span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#080;font-style:italic"><span class="hljs-comment">// = max(dp[-1][0], dp[-1][1] + prices[i])</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#080;font-style:italic"><span class="hljs-comment">// = max(0, -infinity + prices[i]) = 0</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#666">-</span>prices<span style="color:#666">[</span>i<span style="color:#666">];</span>
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic"><span class="hljs-comment">// 根据状态转移方程可得：</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#080;font-style:italic"><span class="hljs-comment">//   dp[i][1] </span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#080;font-style:italic"><span class="hljs-comment">// = max(dp[-1][1], dp[-1][0] - prices[i])</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#080;font-style:italic"><span class="hljs-comment">// = max(-infinity, 0 - prices[i]) </span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#080;font-style:italic"><span class="hljs-comment">// = -prices[i]</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">continue</span></span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span><span style="color:#666">}</span>
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p>第一题就解决了，但是这样处理 base case 很麻烦，而且注意一下状态转移方程，新状态只和相邻的一个状态有关，所以可以用后文 

<a href="https://labuladong.gitee.io/algo/3/25/73/" target="_blank" rel="noopener" class="highlight">动态规划的降维打击：空间压缩技巧</a>，不需要用整个 <code>dp</code> 数组，只需要一个变量储存相邻的那个状态就足够了，这样可以把空间复杂度降到 O(1):</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java hljs" data-lang="java"><span style="display:flex;"><span><span style="color:#080;font-style:italic"><span class="hljs-comment">// 原始版本</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span style="color:#00a000"><span class="hljs-function"><span class="hljs-title">maxProfit_k_1</span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">(</span></span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">[]</span></span></span><span class="hljs-function"><span class="hljs-params"> prices</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> n <span style="color:#666">=</span> prices<span style="color:#666">.</span><span style="color:#b44">length</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span><span style="color:#666">[][]</span> dp <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">new</span></span> <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span><span style="color:#666">[</span>n<span style="color:#666">][</span><span class="hljs-number">2</span><span style="color:#666">];</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> <span style="color:#666">(</span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> i <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span> i <span style="color:#666">&lt;</span> n<span style="color:#666">;</span> i<span style="color:#666">++)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">if</span></span> <span style="color:#666">(</span>i <span style="color:#666">-</span> <span class="hljs-number">1</span> <span style="color:#666">==</span> <span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#080;font-style:italic"><span class="hljs-comment">// base case</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>            dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#666">-</span>prices<span style="color:#666">[</span>i<span style="color:#666">];</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">continue</span></span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>        dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">],</span> dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">+</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>        dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">],</span> <span style="color:#666">-</span>prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">return</span></span> dp<span style="color:#666">[</span>n <span style="color:#666">-</span> <span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">];</span>
</span></span><span style="display:flex;"><span><span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"><span class="hljs-comment">// 空间复杂度优化版本</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span style="color:#00a000"><span class="hljs-function"><span class="hljs-title">maxProfit_k_1</span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">(</span></span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">[]</span></span></span><span class="hljs-function"><span class="hljs-params"> prices</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> n <span style="color:#666">=</span> prices<span style="color:#666">.</span><span style="color:#b44">length</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic"><span class="hljs-comment">// base case: dp[-1][0] = 0, dp[-1][1] = -infinity</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> dp_i_0 <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">,</span> dp_i_1 <span style="color:#666">=</span> Integer<span style="color:#666">.</span><span style="color:#b44">MIN_VALUE</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> <span style="color:#666">(</span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> i <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span> i <span style="color:#666">&lt;</span> n<span style="color:#666">;</span> i<span style="color:#666">++)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-style:italic"><span class="hljs-comment">// dp[i][0] = max(dp[i-1][0], dp[i-1][1] + prices[i])</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        dp_i_0 <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp_i_0<span style="color:#666">,</span> dp_i_1 <span style="color:#666">+</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-style:italic"><span class="hljs-comment">// dp[i][1] = max(dp[i-1][1], -prices[i])</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        dp_i_1 <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp_i_1<span style="color:#666">,</span> <span style="color:#666">-</span>prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">return</span></span> dp_i_0<span style="color:#666">;</span>
</span></span><span style="display:flex;"><span><span style="color:#666">}</span>
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p>两种方式都是一样的，不过这种编程方法简洁很多，但是如果没有前面状态转移方程的引导，是肯定看不懂的。后续的题目，你可以对比一下如何把 <code>dp</code> 数组的空间优化掉。</p>
<p><strong>第二题，看一下力扣第 122 题「

<a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-ii/" target="_blank" rel="noopener" class="highlight">买卖股票的最佳时机 II</a>」，也就是 <code>k</code> 为正无穷的情况</strong>：</p>
<figure><a href="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/title2.png" data-featherlight="image"><img src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/title2.png" class="shadow myimage"></a>
</figure>
<p>题目还专门强调可以在同一天出售，但我觉得这个条件纯属多余，如果当天买当天卖，那利润当然就是 0，这不是和没有进行交易是一样的吗？这道题的特点在于没有给出交易总数 <code>k</code> 的限制，也就相当于 <code>k</code> 为正无穷。</p>
<p>如果 <code>k</code> 为正无穷，那么就可以认为 <code>k</code> 和 <code>k - 1</code> 是一样的。可以这样改写框架：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python hljs" data-lang="python"><span style="display:flex;"><span>dp[i][k][<span style="color:#666"><span class="hljs-number">0</span></span>] <span style="color:#666">=</span> <span style="color:#a2f">max</span>(dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][k][<span style="color:#666"><span class="hljs-number">0</span></span>], dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][k][<span style="color:#666"><span class="hljs-number">1</span></span>] <span style="color:#666">+</span> prices[i])
</span></span><span style="display:flex;"><span>dp[i][k][<span style="color:#666"><span class="hljs-number">1</span></span>] <span style="color:#666">=</span> <span style="color:#a2f">max</span>(dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][k][<span style="color:#666"><span class="hljs-number">1</span></span>], dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][k<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">0</span></span>] <span style="color:#666">-</span> prices[i])
</span></span><span style="display:flex;"><span>            <span style="color:#666">=</span> <span style="color:#a2f">max</span>(dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][k][<span style="color:#666"><span class="hljs-number">1</span></span>], dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][k][<span style="color:#666"><span class="hljs-number">0</span></span>] <span style="color:#666">-</span> prices[i])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>我们发现数组中的 k 已经不会改变了<span style="">，</span>也就是说不需要记录 k 这个状态了<span style="">：</span>
</span></span><span style="display:flex;"><span>dp[i][<span style="color:#666"><span class="hljs-number">0</span></span>] <span style="color:#666">=</span> <span style="color:#a2f">max</span>(dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">0</span></span>], dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">1</span></span>] <span style="color:#666">+</span> prices[i])
</span></span><span style="display:flex;"><span>dp[i][<span style="color:#666"><span class="hljs-number">1</span></span>] <span style="color:#666">=</span> <span style="color:#a2f">max</span>(dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">1</span></span>], dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">0</span></span>] <span style="color:#666">-</span> prices[i])
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p>直接翻译成代码：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java hljs" data-lang="java"><span style="display:flex;"><span><span style="color:#080;font-style:italic"><span class="hljs-comment">// 原始版本</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span style="color:#00a000"><span class="hljs-function"><span class="hljs-title">maxProfit_k_inf</span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">(</span></span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">[]</span></span></span><span class="hljs-function"><span class="hljs-params"> prices</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> n <span style="color:#666">=</span> prices<span style="color:#666">.</span><span style="color:#b44">length</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span><span style="color:#666">[][]</span> dp <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">new</span></span> <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span><span style="color:#666">[</span>n<span style="color:#666">][</span><span class="hljs-number">2</span><span style="color:#666">];</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> <span style="color:#666">(</span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> i <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span> i <span style="color:#666">&lt;</span> n<span style="color:#666">;</span> i<span style="color:#666">++)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">if</span></span> <span style="color:#666">(</span>i <span style="color:#666">-</span> <span class="hljs-number">1</span> <span style="color:#666">==</span> <span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#080;font-style:italic"><span class="hljs-comment">// base case</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>            dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#666">-</span>prices<span style="color:#666">[</span>i<span style="color:#666">];</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">continue</span></span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>        dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">],</span> dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">+</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>        dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">],</span> dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">-</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">return</span></span> dp<span style="color:#666">[</span>n <span style="color:#666">-</span> <span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">];</span>
</span></span><span style="display:flex;"><span><span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"><span class="hljs-comment">// 空间复杂度优化版本</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span style="color:#00a000"><span class="hljs-function"><span class="hljs-title">maxProfit_k_inf</span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">(</span></span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">[]</span></span></span><span class="hljs-function"><span class="hljs-params"> prices</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> n <span style="color:#666">=</span> prices<span style="color:#666">.</span><span style="color:#b44">length</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> dp_i_0 <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">,</span> dp_i_1 <span style="color:#666">=</span> Integer<span style="color:#666">.</span><span style="color:#b44">MIN_VALUE</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> <span style="color:#666">(</span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> i <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span> i <span style="color:#666">&lt;</span> n<span style="color:#666">;</span> i<span style="color:#666">++)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> temp <span style="color:#666">=</span> dp_i_0<span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>        dp_i_0 <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp_i_0<span style="color:#666">,</span> dp_i_1 <span style="color:#666">+</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>        dp_i_1 <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp_i_1<span style="color:#666">,</span> temp <span style="color:#666">-</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">return</span></span> dp_i_0<span style="color:#666">;</span>
</span></span><span style="display:flex;"><span><span style="color:#666">}</span>
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p><strong>第三题，看力扣第 309 题「

<a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/" target="_blank" rel="noopener" class="highlight">最佳买卖股票时机含冷冻期</a>」，也就是 <code>k</code> 为正无穷，但含有交易冷冻期的情况</strong>：</p>
<figure><a href="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/title3.png" data-featherlight="image"><img src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/title3.png" class="shadow myimage"></a>
</figure>
<p>和上一道题一样的，只不过每次 <code>sell</code> 之后要等一天才能继续交易，只要把这个特点融入上一题的状态转移方程即可：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python hljs" data-lang="python"><span style="display:flex;"><span>dp[i][<span style="color:#666"><span class="hljs-number">0</span></span>] <span style="color:#666">=</span> <span style="color:#a2f">max</span>(dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">0</span></span>], dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">1</span></span>] <span style="color:#666">+</span> prices[i])
</span></span><span style="display:flex;"><span>dp[i][<span style="color:#666"><span class="hljs-number">1</span></span>] <span style="color:#666">=</span> <span style="color:#a2f">max</span>(dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">1</span></span>], dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">2</span></span>][<span style="color:#666"><span class="hljs-number">0</span></span>] <span style="color:#666">-</span> prices[i])
</span></span><span style="display:flex;"><span>解释<span style="">：</span>第 i 天选择 buy 的时候<span style="">，</span>要从 i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">2</span></span> 的状态转移<span style="">，</span>而不是 i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span> <span style="">。</span>
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p>翻译成代码：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java hljs" data-lang="java"><span style="display:flex;"><span><span style="color:#080;font-style:italic"><span class="hljs-comment">// 原始版本</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span style="color:#00a000"><span class="hljs-function"><span class="hljs-title">maxProfit_with_cool</span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">(</span></span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">[]</span></span></span><span class="hljs-function"><span class="hljs-params"> prices</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> n <span style="color:#666">=</span> prices<span style="color:#666">.</span><span style="color:#b44">length</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span><span style="color:#666">[][]</span> dp <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">new</span></span> <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span><span style="color:#666">[</span>n<span style="color:#666">][</span><span class="hljs-number">2</span><span style="color:#666">];</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> <span style="color:#666">(</span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> i <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span> i <span style="color:#666">&lt;</span> n<span style="color:#666">;</span> i<span style="color:#666">++)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">if</span></span> <span style="color:#666">(</span>i <span style="color:#666">-</span> <span class="hljs-number">1</span> <span style="color:#666">==</span> <span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#080;font-style:italic"><span class="hljs-comment">// base case 1</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>            dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#666">-</span>prices<span style="color:#666">[</span>i<span style="color:#666">];</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">continue</span></span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">if</span></span> <span style="color:#666">(</span>i <span style="color:#666">-</span> <span class="hljs-number">2</span> <span style="color:#666">==</span> <span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#080;font-style:italic"><span class="hljs-comment">// base case 2</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">],</span> dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">+</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#080;font-style:italic"><span class="hljs-comment">// i - 2 小于 0 时根据状态转移方程推出对应 base case</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">],</span> <span style="color:#666">-</span>prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#080;font-style:italic"><span class="hljs-comment">//   dp[i][1] </span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            <span style="color:#080;font-style:italic"><span class="hljs-comment">// = max(dp[i-1][1], dp[-1][0] - prices[i])</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            <span style="color:#080;font-style:italic"><span class="hljs-comment">// = max(dp[i-1][1], 0 - prices[i])</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            <span style="color:#080;font-style:italic"><span class="hljs-comment">// = max(dp[i-1][1], -prices[i])</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">continue</span></span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>        dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">],</span> dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">+</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>        dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">],</span> dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">2</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">-</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">return</span></span> dp<span style="color:#666">[</span>n <span style="color:#666">-</span> <span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">];</span>
</span></span><span style="display:flex;"><span><span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"><span class="hljs-comment">// 空间复杂度优化版本</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span style="color:#00a000"><span class="hljs-function"><span class="hljs-title">maxProfit_with_cool</span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">(</span></span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">[]</span></span></span><span class="hljs-function"><span class="hljs-params"> prices</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> n <span style="color:#666">=</span> prices<span style="color:#666">.</span><span style="color:#b44">length</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> dp_i_0 <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">,</span> dp_i_1 <span style="color:#666">=</span> Integer<span style="color:#666">.</span><span style="color:#b44">MIN_VALUE</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> dp_pre_0 <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span> <span style="color:#080;font-style:italic"><span class="hljs-comment">// 代表 dp[i-2][0]</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> <span style="color:#666">(</span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> i <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span> i <span style="color:#666">&lt;</span> n<span style="color:#666">;</span> i<span style="color:#666">++)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> temp <span style="color:#666">=</span> dp_i_0<span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>        dp_i_0 <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp_i_0<span style="color:#666">,</span> dp_i_1 <span style="color:#666">+</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>        dp_i_1 <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp_i_1<span style="color:#666">,</span> dp_pre_0 <span style="color:#666">-</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>        dp_pre_0 <span style="color:#666">=</span> temp<span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">return</span></span> dp_i_0<span style="color:#666">;</span>
</span></span><span style="display:flex;"><span><span style="color:#666">}</span>
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p><strong>第四题，看力扣第 714 题「

<a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/" target="_blank" rel="noopener" class="highlight">买卖股票的最佳时机含手续费</a>」，也就是 <code>k</code> 为正无穷且考虑交易手续费的情况</strong>：</p>
<figure><a href="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/title4.png" data-featherlight="image"><img src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/title4.png" class="shadow myimage"></a>
</figure>
<p>每次交易要支付手续费，只要把手续费从利润中减去即可，改写方程：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python hljs" data-lang="python"><span style="display:flex;"><span>dp[i][<span style="color:#666"><span class="hljs-number">0</span></span>] <span style="color:#666">=</span> <span style="color:#a2f">max</span>(dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">0</span></span>], dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">1</span></span>] <span style="color:#666">+</span> prices[i])
</span></span><span style="display:flex;"><span>dp[i][<span style="color:#666"><span class="hljs-number">1</span></span>] <span style="color:#666">=</span> <span style="color:#a2f">max</span>(dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">1</span></span>], dp[i<span style="color:#666"><span class="hljs-number">-</span></span><span style="color:#666"><span class="hljs-number">1</span></span>][<span style="color:#666"><span class="hljs-number">0</span></span>] <span style="color:#666">-</span> prices[i] <span style="color:#666">-</span> fee)
</span></span><span style="display:flex;"><span>解释<span style="">：</span>相当于买入股票的价格升高了<span style="">。</span>
</span></span><span style="display:flex;"><span>在第一个式子里减也是一样的<span style="">，</span>相当于卖出股票的价格减小了<span style="">。</span>
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><blockquote>
<p>如果直接把 <code>fee</code> 放在第一个式子里减，会有一些测试用例无法通过，错误原因是整型溢出而不是思路问题。一种解决方案是把代码中的 <code>int</code> 类型都改成 <code>long</code> 类型，避免 <code>int</code> 的整型溢出。</p>
</blockquote>
<p>直接翻译成代码，注意状态转移方程改变后 base case 也要做出对应改变：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java hljs" data-lang="java"><span style="display:flex;"><span><span style="color:#080;font-style:italic"><span class="hljs-comment">// 原始版本</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span style="color:#00a000"><span class="hljs-function"><span class="hljs-title">maxProfit_with_fee</span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">(</span></span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">[]</span></span></span><span class="hljs-function"><span class="hljs-params"> prices</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">,</span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fee</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> n <span style="color:#666">=</span> prices<span style="color:#666">.</span><span style="color:#b44">length</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span><span style="color:#666">[][]</span> dp <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">new</span></span> <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span><span style="color:#666">[</span>n<span style="color:#666">][</span><span class="hljs-number">2</span><span style="color:#666">];</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> <span style="color:#666">(</span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> i <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span> i <span style="color:#666">&lt;</span> n<span style="color:#666">;</span> i<span style="color:#666">++)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">if</span></span> <span style="color:#666">(</span>i <span style="color:#666">-</span> <span class="hljs-number">1</span> <span style="color:#666">==</span> <span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#080;font-style:italic"><span class="hljs-comment">// base case</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>            dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#666">-</span>prices<span style="color:#666">[</span>i<span style="color:#666">]</span> <span style="color:#666">-</span> fee<span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#080;font-style:italic"><span class="hljs-comment">//   dp[i][1]</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            <span style="color:#080;font-style:italic"><span class="hljs-comment">// = max(dp[i - 1][1], dp[i - 1][0] - prices[i] - fee)</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            <span style="color:#080;font-style:italic"><span class="hljs-comment">// = max(dp[-1][1], dp[-1][0] - prices[i] - fee)</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            <span style="color:#080;font-style:italic"><span class="hljs-comment">// = max(-inf, 0 - prices[i] - fee)</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            <span style="color:#080;font-style:italic"><span class="hljs-comment">// = -prices[i] - fee</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">continue</span></span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>        dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i <span style="color:#666">-</span> <span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">],</span> dp<span style="color:#666">[</span>i <span style="color:#666">-</span> <span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">+</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>        dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i <span style="color:#666">-</span> <span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">],</span> dp<span style="color:#666">[</span>i <span style="color:#666">-</span> <span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">-</span> prices<span style="color:#666">[</span>i<span style="color:#666">]</span> <span style="color:#666">-</span> fee<span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">return</span></span> dp<span style="color:#666">[</span>n <span style="color:#666">-</span> <span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">];</span>
</span></span><span style="display:flex;"><span><span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"><span class="hljs-comment">// 空间复杂度优化版本</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span style="color:#00a000"><span class="hljs-function"><span class="hljs-title">maxProfit_with_fee</span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">(</span></span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">[]</span></span></span><span class="hljs-function"><span class="hljs-params"> prices</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">,</span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fee</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> n <span style="color:#666">=</span> prices<span style="color:#666">.</span><span style="color:#b44">length</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> dp_i_0 <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">,</span> dp_i_1 <span style="color:#666">=</span> Integer<span style="color:#666">.</span><span style="color:#b44">MIN_VALUE</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> <span style="color:#666">(</span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> i <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span> i <span style="color:#666">&lt;</span> n<span style="color:#666">;</span> i<span style="color:#666">++)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> temp <span style="color:#666">=</span> dp_i_0<span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>        dp_i_0 <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp_i_0<span style="color:#666">,</span> dp_i_1 <span style="color:#666">+</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>        dp_i_1 <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp_i_1<span style="color:#666">,</span> temp <span style="color:#666">-</span> prices<span style="color:#666">[</span>i<span style="color:#666">]</span> <span style="color:#666">-</span> fee<span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">return</span></span> dp_i_0<span style="color:#666">;</span>
</span></span><span style="display:flex;"><span><span style="color:#666">}</span>
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p><strong>第五题，看力扣第 123 题「

<a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iii/" target="_blank" rel="noopener" class="highlight">买卖股票的最佳时机 III</a>」，也就是 <code>k = 2</code> 的情况</strong>：</p>
<figure><a href="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/title5.png" data-featherlight="image"><img src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/title5.png" class="shadow myimage"></a>
</figure>
<p><code>k = 2</code> 和前面题目的情况稍微不同，因为上面的情况都和 <code>k</code> 的关系不太大：要么 <code>k</code> 是正无穷，状态转移和 <code>k</code> 没关系了；要么 <code>k = 1</code>，跟 <code>k = 0</code> 这个 base case 挨得近，最后也没有存在感。</p>
<p>这道题 <code>k = 2</code> 和后面要讲的 <code>k</code> 是任意正整数的情况中，对 <code>k</code> 的处理就凸显出来了，我们直接写代码，边写边分析原因。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java hljs" data-lang="java"><span style="display:flex;"><span>原始的状态转移方程<span style="">，</span>没有可化简的地方
</span></span><span style="display:flex;"><span>dp<span style="color:#666">[</span>i<span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> max<span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">],</span> dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">+</span> prices<span style="color:#666">[</span>i<span style="color:#666">])</span>
</span></span><span style="display:flex;"><span>dp<span style="color:#666">[</span>i<span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> max<span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">],</span> dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span>k<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">-</span> prices<span style="color:#666">[</span>i<span style="color:#666">])</span>
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p>按照之前的代码，我们可能想当然这样写代码（错误的）：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java hljs" data-lang="java"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> k <span style="color:#666">=</span> <span class="hljs-number">2</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span><span style="color:#666">[][][]</span> dp <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">new</span></span> <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span><span style="color:#666">[</span>n<span style="color:#666">][</span>k <span style="color:#666">+</span> <span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">2</span><span style="color:#666">];</span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> <span style="color:#666">(</span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> i <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span> i <span style="color:#666">&lt;</span> n<span style="color:#666">;</span> i<span style="color:#666">++)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">if</span></span> <span style="color:#666">(</span>i <span style="color:#666">-</span> <span class="hljs-number">1</span> <span style="color:#666">==</span> <span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-style:italic"><span class="hljs-comment">// 处理 base case</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        dp<span style="color:#666">[</span>i<span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>        dp<span style="color:#666">[</span>i<span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#666">-</span>prices<span style="color:#666">[</span>i<span style="color:#666">];</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">continue</span></span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>    dp<span style="color:#666">[</span>i<span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">],</span> dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">+</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>    dp<span style="color:#666">[</span>i<span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">],</span> dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span>k<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">-</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span><span style="color:#666">}</span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">return</span></span> dp<span style="color:#666">[</span>n <span style="color:#666">-</span> <span class="hljs-number">1</span><span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">];</span>
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p>为什么错误？我这不是照着状态转移方程写的吗？</p>
<p>还记得前面总结的「穷举框架」吗？就是说我们必须穷举所有状态。其实我们之前的解法，都在穷举所有状态，只是之前的题目中 <code>k</code> 都被化简掉了。</p>
<p>比如说第一题，<code>k = 1</code> 时的代码框架：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java hljs" data-lang="java"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> n <span style="color:#666">=</span> prices<span style="color:#666">.</span><span style="color:#b44">length</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span><span style="color:#666">[][]</span> dp <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">new</span></span> <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span><span style="color:#666">[</span>n<span style="color:#666">][</span><span class="hljs-number">2</span><span style="color:#666">];</span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> <span style="color:#666">(</span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> i <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span> i <span style="color:#666">&lt;</span> n<span style="color:#666">;</span> i<span style="color:#666">++)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>    dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">],</span> dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">+</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>    dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">],</span> <span style="color:#666">-</span>prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span><span style="color:#666">}</span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">return</span></span> dp<span style="color:#666">[</span>n <span style="color:#666">-</span> <span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">];</span>
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p>但当 <code>k = 2</code> 时，由于没有消掉 <code>k</code> 的影响，所以必须要对 <code>k</code> 进行穷举：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java hljs" data-lang="java"><span style="display:flex;"><span><span style="color:#080;font-style:italic"><span class="hljs-comment">// 原始版本</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span style="color:#00a000"><span class="hljs-function"><span class="hljs-title">maxProfit_k_2</span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">(</span></span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">[]</span></span></span><span class="hljs-function"><span class="hljs-params"> prices</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> max_k <span style="color:#666">=</span> <span class="hljs-number">2</span><span style="color:#666">,</span> n <span style="color:#666">=</span> prices<span style="color:#666">.</span><span style="color:#b44">length</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span><span style="color:#666">[][][]</span> dp <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">new</span></span> <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span><span style="color:#666">[</span>n<span style="color:#666">][</span>max_k <span style="color:#666">+</span> <span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">2</span><span style="color:#666">];</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> <span style="color:#666">(</span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> i <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span> i <span style="color:#666">&lt;</span> n<span style="color:#666">;</span> i<span style="color:#666">++)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> <span style="color:#666">(</span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> k <span style="color:#666">=</span> max_k<span style="color:#666">;</span> k <span style="color:#666">&gt;=</span> <span class="hljs-number">1</span><span style="color:#666">;</span> k<span style="color:#666">--)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">if</span></span> <span style="color:#666">(</span>i <span style="color:#666">-</span> <span class="hljs-number">1</span> <span style="color:#666">==</span> <span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#080;font-style:italic"><span class="hljs-comment">// 处理 base case</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                dp<span style="color:#666">[</span>i<span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>                dp<span style="color:#666">[</span>i<span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#666">-</span>prices<span style="color:#666">[</span>i<span style="color:#666">];</span>
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">continue</span></span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>            dp<span style="color:#666">[</span>i<span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">],</span> dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">+</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>            dp<span style="color:#666">[</span>i<span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">],</span> dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span>k<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">-</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic"><span class="hljs-comment">// 穷举了 n × max_k × 2 个状态，正确。</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">return</span></span> dp<span style="color:#666">[</span>n <span style="color:#666">-</span> <span class="hljs-number">1</span><span style="color:#666">][</span>max_k<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">];</span>
</span></span><span style="display:flex;"><span><span style="color:#666">}</span>
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><blockquote>
<p><strong>PS：这里肯定会有读者疑惑，<code>k</code> 的 base case 是 0，按理说应该从 <code>k = 1, k++</code><span class="copy-to-clipboard" title="Copy to clipboard"></span> 这样穷举状态 <code>k</code> 才对？而且如果你真的这样从小到大遍历 <code>k</code>，提交发现也是可以的</strong>。</p>
</blockquote>
<p>这个疑问很正确，因为我们后文 

<a href="https://labuladong.gitee.io/algo/3/25/71/" target="_blank" rel="noopener" class="highlight">动态规划答疑篇</a> 有介绍 <code>dp</code> 数组的遍历顺序是怎么确定的，主要是根据 base case，以 base case 为起点，逐步向结果靠近。</p>
<p>但为什么我从大到小遍历 <code>k</code> 也可以正确提交呢？因为你注意看，<code>dp[i][k][..]</code><span class="copy-to-clipboard" title="Copy to clipboard"></span> 不会依赖 <code>dp[i][k - 1][..]</code><span class="copy-to-clipboard" title="Copy to clipboard"></span>，而是依赖 <code>dp[i - 1][k - 1][..]</code><span class="copy-to-clipboard" title="Copy to clipboard"></span>，而 <code>dp[i - 1][..][..]</code><span class="copy-to-clipboard" title="Copy to clipboard"></span>，都是已经计算出来的，所以不管你是 <code>k = max_k, k--</code><span class="copy-to-clipboard" title="Copy to clipboard"></span>，还是 <code>k = 1, k++</code><span class="copy-to-clipboard" title="Copy to clipboard"></span>，都是可以得出正确答案的。</p>
<p>那为什么我使用 <code>k = max_k, k--</code><span class="copy-to-clipboard" title="Copy to clipboard"></span> 的方式呢？因为这样符合语义：</p>
<p>你买股票，初始的「状态」是什么？应该是从第 0 天开始，而且还没有进行过买卖，所以最大交易次数限制 <code>k</code> 应该是 <code>max_k</code>；而随着「状态」的推移，你会进行交易，那么交易次数上限 <code>k</code> 应该不断减少，这样一想，<code>k = max_k, k--</code><span class="copy-to-clipboard" title="Copy to clipboard"></span> 的方式是比较合乎实际场景的。</p>
<p>当然，这里 <code>k</code> 取值范围比较小，所以也可以不用 for 循环，直接把 k = 1 和 2 的情况全部列举出来也可以：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java hljs" data-lang="java"><span style="display:flex;"><span><span style="color:#080;font-style:italic"><span class="hljs-comment">// 状态转移方程：</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"><span class="hljs-comment">// dp[i][2][0] = max(dp[i-1][2][0], dp[i-1][2][1] + prices[i])</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"><span class="hljs-comment">// dp[i][2][1] = max(dp[i-1][2][1], dp[i-1][1][0] - prices[i])</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"><span class="hljs-comment">// dp[i][1][0] = max(dp[i-1][1][0], dp[i-1][1][1] + prices[i])</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"><span class="hljs-comment">// dp[i][1][1] = max(dp[i-1][1][1], -prices[i])</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"><span class="hljs-comment">// 空间复杂度优化版本</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span style="color:#00a000"><span class="hljs-function"><span class="hljs-title">maxProfit_k_2</span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">(</span></span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">[]</span></span></span><span class="hljs-function"><span class="hljs-params"> prices</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic"><span class="hljs-comment">// base case</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> dp_i10 <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">,</span> dp_i11 <span style="color:#666">=</span> Integer<span style="color:#666">.</span><span style="color:#b44">MIN_VALUE</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> dp_i20 <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">,</span> dp_i21 <span style="color:#666">=</span> Integer<span style="color:#666">.</span><span style="color:#b44">MIN_VALUE</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> <span style="color:#666">(</span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> price <span style="color:#666">:</span> prices<span style="color:#666">)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>        dp_i20 <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp_i20<span style="color:#666">,</span> dp_i21 <span style="color:#666">+</span> price<span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>        dp_i21 <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp_i21<span style="color:#666">,</span> dp_i10 <span style="color:#666">-</span> price<span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>        dp_i10 <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp_i10<span style="color:#666">,</span> dp_i11 <span style="color:#666">+</span> price<span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>        dp_i11 <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp_i11<span style="color:#666">,</span> <span style="color:#666">-</span>price<span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">return</span></span> dp_i20<span style="color:#666">;</span>
</span></span><span style="display:flex;"><span><span style="color:#666">}</span>
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p>有状态转移方程和含义明确的变量名指导，相信你很容易看懂。其实我们可以故弄玄虚，把上述四个变量换成 <code>a, b, c, d</code><span class="copy-to-clipboard" title="Copy to clipboard"></span>。这样当别人看到你的代码时就会大惊失色，对你肃然起敬。</p>
<p><strong>第六题，看力扣第 188 题「

<a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/" target="_blank" rel="noopener" class="highlight">买卖股票的最佳时机 IV</a>」，即 <code>k</code> 可以是题目给定的任何数的情况</strong>：</p>
<figure><a href="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/title.png" data-featherlight="image"><img src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/title.png" class="shadow myimage"></a>
</figure>
<p>有了上一题 <code>k = 2</code> 的铺垫，这题应该和上一题的第一个解法没啥区别，你把上一题的 <code>k = 2</code> 换成题目输入的 <code>k</code> 就行了。</p>
<p>但试一下发现会出一个内存超限的错误，原来是传入的 <code>k</code> 值会非常大，<code>dp</code> 数组太大了。那么现在想想，交易次数 <code>k</code> 最多有多大呢？</p>
<p>一次交易由买入和卖出构成，至少需要两天。所以说有效的限制 <code>k</code> 应该不超过 <code>n/2</code>，如果超过，就没有约束作用了，相当于 <code>k</code> 没有限制的情况，而这种情况是之前解决过的。</p>
<p>所以我们可以直接把之前的代码重用：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java hljs" data-lang="java"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span style="color:#00a000"><span class="hljs-function"><span class="hljs-title">maxProfit_k_any</span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">(</span></span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> max_k</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">,</span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">[]</span></span></span><span class="hljs-function"><span class="hljs-params"> prices</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> n <span style="color:#666">=</span> prices<span style="color:#666">.</span><span style="color:#b44">length</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">if</span></span> <span style="color:#666">(</span>n <span style="color:#666">&lt;=</span> <span class="hljs-number">0</span><span style="color:#666">)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">return</span></span> <span class="hljs-number">0</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">if</span></span> <span style="color:#666">(</span>max_k <span style="color:#666">&gt;</span> n <span style="color:#666">/</span> <span class="hljs-number">2</span><span style="color:#666">)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-style:italic"><span class="hljs-comment">// 复用之前交易次数 k 没有限制的情况</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">return</span></span> maxProfit_k_inf<span style="color:#666">(</span>prices<span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic"><span class="hljs-comment">// base case：</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#080;font-style:italic"><span class="hljs-comment">// dp[-1][...][0] = dp[...][0][0] = 0</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#080;font-style:italic"><span class="hljs-comment">// dp[-1][...][1] = dp[...][0][1] = -infinity</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span><span style="color:#666">[][][]</span> dp <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">new</span></span> <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span><span style="color:#666">[</span>n<span style="color:#666">][</span>max_k <span style="color:#666">+</span> <span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">2</span><span style="color:#666">];</span>
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic"><span class="hljs-comment">// k = 0 时的 base case</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> <span style="color:#666">(</span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> i <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span> i <span style="color:#666">&lt;</span> n<span style="color:#666">;</span> i<span style="color:#666">++)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>        dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> Integer<span style="color:#666">.</span><span style="color:#b44">MIN_VALUE</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>        dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> <span style="color:#666">(</span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> i <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span> i <span style="color:#666">&lt;</span> n<span style="color:#666">;</span> i<span style="color:#666">++)</span> 
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> <span style="color:#666">(</span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> k <span style="color:#666">=</span> max_k<span style="color:#666">;</span> k <span style="color:#666">&gt;=</span> <span class="hljs-number">1</span><span style="color:#666">;</span> k<span style="color:#666">--)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">if</span></span> <span style="color:#666">(</span>i <span style="color:#666">-</span> <span class="hljs-number">1</span> <span style="color:#666">==</span> <span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#080;font-style:italic"><span class="hljs-comment">// 处理 i = -1 时的 base case</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                dp<span style="color:#666">[</span>i<span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>                dp<span style="color:#666">[</span>i<span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#666">-</span>prices<span style="color:#666">[</span>i<span style="color:#666">];</span>
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">continue</span></span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>            dp<span style="color:#666">[</span>i<span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">],</span> dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">+</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>            dp<span style="color:#666">[</span>i<span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">],</span> dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span>k<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">-</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>     
</span></span><span style="display:flex;"><span>        <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">return</span></span> dp<span style="color:#666">[</span>n <span style="color:#666">-</span> <span class="hljs-number">1</span><span style="color:#666">][</span>max_k<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">];</span>
</span></span><span style="display:flex;"><span><span style="color:#666">}</span>
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p>至此，6 道题目通过一个状态转移方程全部解决。</p>
<h3 id="万法归一">万法归一 <span class="anchor" data-clipboard-text="https://labuladong.gitee.io/algo/1/13/#万法归一"><i class="fas fa-link fa-lg"></i></span></h3>
<p>如果你能看到这里，已经可以给你鼓掌了，初次理解如此复杂的动态规划问题想必消耗了你不少的脑细胞，不过这是值得的，股票系列问题已经属于动态规划问题中较困难的了，如果这些题你都能搞懂，试问，其他那些虾兵蟹将又何足道哉？</p>
<p><strong>现在你已经过了九九八十一难中的前八十难，最后我还要再难为你一下，请你实现如下函数</strong>：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java hljs" data-lang="java"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span style="color:#00a000"><span class="hljs-function"><span class="hljs-title">maxProfit_all_in_one</span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">(</span></span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> max_k</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">,</span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">[]</span></span></span><span class="hljs-function"><span class="hljs-params"> prices</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">,</span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> cooldown</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">,</span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fee</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">)</span></span>;</span>
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p>输入股票价格数组 <code>prices</code><span class="copy-to-clipboard" title="Copy to clipboard"></span>，你最多进行 <code>max_k</code> 次交易，每次交易需要额外消耗 <code>fee</code> 的手续费，而且每次交易之后需要经过 <code>cooldown</code><span class="copy-to-clipboard" title="Copy to clipboard"></span> 天的冷冻期才能进行下一次交易，请你计算并返回可以获得的最大利润。</p>
<p>怎么样，有没有被吓到？如果你直接给别人出一道这样的题目，估计对方要当场吐血，不过我们这样一步步做过来，你应该很容易发现这道题目就是之前我们探讨的几种情况的组合体嘛。</p>
<p>所以，我们只要把之前实现的几种代码掺和到一块，<strong>在 base case 和状态转移方程中同时加上 <code>cooldown</code><span class="copy-to-clipboard" title="Copy to clipboard"></span> 和 <code>fee</code> 的约束就行了</strong>：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java hljs" data-lang="java"><span style="display:flex;"><span><span style="color:#080;font-style:italic"><span class="hljs-comment">// 同时考虑交易次数的限制、冷冻期和手续费</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span style="color:#00a000"><span class="hljs-function"><span class="hljs-title">maxProfit_all_in_one</span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">(</span></span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> max_k</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">,</span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">[]</span></span></span><span class="hljs-function"><span class="hljs-params"> prices</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">,</span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> cooldown</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">,</span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fee</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> n <span style="color:#666">=</span> prices<span style="color:#666">.</span><span style="color:#b44">length</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">if</span></span> <span style="color:#666">(</span>n <span style="color:#666">&lt;=</span> <span class="hljs-number">0</span><span style="color:#666">)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">return</span></span> <span class="hljs-number">0</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">if</span></span> <span style="color:#666">(</span>max_k <span style="color:#666">&gt;</span> n <span style="color:#666">/</span> <span class="hljs-number">2</span><span style="color:#666">)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-style:italic"><span class="hljs-comment">// 交易次数 k 没有限制的情况</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">return</span></span> maxProfit_k_inf<span style="color:#666">(</span>prices<span style="color:#666">,</span> cooldown<span style="color:#666">,</span> fee<span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span><span style="color:#666">[][][]</span> dp <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">new</span></span> <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span><span style="color:#666">[</span>n<span style="color:#666">][</span>max_k <span style="color:#666">+</span> <span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">2</span><span style="color:#666">];</span>
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic"><span class="hljs-comment">// k = 0 时的 base case</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> <span style="color:#666">(</span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> i <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span> i <span style="color:#666">&lt;</span> n<span style="color:#666">;</span> i<span style="color:#666">++)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>        dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> Integer<span style="color:#666">.</span><span style="color:#b44">MIN_VALUE</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>        dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> <span style="color:#666">(</span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> i <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span> i <span style="color:#666">&lt;</span> n<span style="color:#666">;</span> i<span style="color:#666">++)</span> 
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> <span style="color:#666">(</span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> k <span style="color:#666">=</span> max_k<span style="color:#666">;</span> k <span style="color:#666">&gt;=</span> <span class="hljs-number">1</span><span style="color:#666">;</span> k<span style="color:#666">--)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">if</span></span> <span style="color:#666">(</span>i <span style="color:#666">-</span> <span class="hljs-number">1</span> <span style="color:#666">==</span> <span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#080;font-style:italic"><span class="hljs-comment">// base case 1</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                dp<span style="color:#666">[</span>i<span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>                dp<span style="color:#666">[</span>i<span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#666">-</span>prices<span style="color:#666">[</span>i<span style="color:#666">]</span> <span style="color:#666">-</span> fee<span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">continue</span></span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#080;font-style:italic"><span class="hljs-comment">// 包含 cooldown 的 base case</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">if</span></span> <span style="color:#666">(</span>i <span style="color:#666">-</span> cooldown <span style="color:#666">-</span> <span class="hljs-number">1</span> <span style="color:#666">&lt;</span> <span class="hljs-number">0</span><span style="color:#666">)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#080;font-style:italic"><span class="hljs-comment">// base case 2</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                dp<span style="color:#666">[</span>i<span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">],</span> dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">+</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>                <span style="color:#080;font-style:italic"><span class="hljs-comment">// 别忘了减 fee</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                dp<span style="color:#666">[</span>i<span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">],</span> <span style="color:#666">-</span>prices<span style="color:#666">[</span>i<span style="color:#666">]</span> <span style="color:#666">-</span> fee<span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">continue</span></span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>            dp<span style="color:#666">[</span>i<span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">],</span> dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">+</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#080;font-style:italic"><span class="hljs-comment">// 同时考虑 cooldown 和 fee</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            dp<span style="color:#666">[</span>i<span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span>k<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">],</span> dp<span style="color:#666">[</span>i<span style="color:#666">-</span>cooldown<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span>k<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">-</span> prices<span style="color:#666">[</span>i<span style="color:#666">]</span> <span style="color:#666">-</span> fee<span style="color:#666">);</span>     
</span></span><span style="display:flex;"><span>        <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">return</span></span> dp<span style="color:#666">[</span>n <span style="color:#666">-</span> <span class="hljs-number">1</span><span style="color:#666">][</span>max_k<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">];</span>
</span></span><span style="display:flex;"><span><span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"><span class="hljs-comment">// k 无限制，包含手续费和冷冻期</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span style="color:#00a000"><span class="hljs-function"><span class="hljs-title">maxProfit_k_inf</span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">(</span></span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">[]</span></span></span><span class="hljs-function"><span class="hljs-params"> prices</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">,</span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> cooldown</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">,</span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span style="color:#0b0;font-weight:bold"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fee</span></span><span style="color:#666"><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> n <span style="color:#666">=</span> prices<span style="color:#666">.</span><span style="color:#b44">length</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span><span style="color:#666">[][]</span> dp <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">new</span></span> <span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span><span style="color:#666">[</span>n<span style="color:#666">][</span><span class="hljs-number">2</span><span style="color:#666">];</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">for</span></span> <span style="color:#666">(</span><span style="color:#0b0;font-weight:bold"><span class="hljs-keyword">int</span></span> i <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span> i <span style="color:#666">&lt;</span> n<span style="color:#666">;</span> i<span style="color:#666">++)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">if</span></span> <span style="color:#666">(</span>i <span style="color:#666">-</span> <span class="hljs-number">1</span> <span style="color:#666">==</span> <span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#080;font-style:italic"><span class="hljs-comment">// base case 1</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span class="hljs-number">0</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>            dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#666">-</span>prices<span style="color:#666">[</span>i<span style="color:#666">]</span> <span style="color:#666">-</span> fee<span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">continue</span></span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-style:italic"><span class="hljs-comment">// 包含 cooldown 的 base case</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">if</span></span> <span style="color:#666">(</span>i <span style="color:#666">-</span> cooldown <span style="color:#666">-</span> <span class="hljs-number">1</span> <span style="color:#666">&lt;</span> <span class="hljs-number">0</span><span style="color:#666">)</span> <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#080;font-style:italic"><span class="hljs-comment">// base case 2</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">],</span> dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">+</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#080;font-style:italic"><span class="hljs-comment">// 别忘了减 fee</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i<span style="color:#666">-</span><span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">],</span> <span style="color:#666">-</span>prices<span style="color:#666">[</span>i<span style="color:#666">]</span> <span style="color:#666">-</span> fee<span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">continue</span></span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>        dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i <span style="color:#666">-</span> <span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">],</span> dp<span style="color:#666">[</span>i <span style="color:#666">-</span> <span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">+</span> prices<span style="color:#666">[</span>i<span style="color:#666">]);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-style:italic"><span class="hljs-comment">// 同时考虑 cooldown 和 fee</span>
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        dp<span style="color:#666">[</span>i<span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">]</span> <span style="color:#666">=</span> Math<span style="color:#666">.</span><span style="color:#b44">max</span><span style="color:#666">(</span>dp<span style="color:#666">[</span>i <span style="color:#666">-</span> <span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">1</span><span style="color:#666">],</span> dp<span style="color:#666">[</span>i <span style="color:#666">-</span> cooldown <span style="color:#666">-</span> <span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">]</span> <span style="color:#666">-</span> prices<span style="color:#666">[</span>i<span style="color:#666">]</span> <span style="color:#666">-</span> fee<span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold"><span class="hljs-keyword">return</span></span> dp<span style="color:#666">[</span>n <span style="color:#666">-</span> <span class="hljs-number">1</span><span style="color:#666">][</span><span class="hljs-number">0</span><span style="color:#666">];</span>
</span></span><span style="display:flex;"><span><span style="color:#666">}</span>
</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p>你可以用这个 <code>maxProfit_all_in_one</code><span class="copy-to-clipboard" title="Copy to clipboard"></span> 函数去完成之前讲的 6 道题目，因为我们无法对 <code>dp</code> 数组进行优化，所以执行效率上不是最优的，但正确性上肯定是没有问题的。</p>
<p>最后总结一下吧，本文给大家讲了如何通过状态转移的方法解决复杂的问题，用一个状态转移方程秒杀了 6 道股票买卖问题，现在回头去看，其实也不算那么可怕对吧？</p>
<p>关键就在于列举出所有可能的「状态」，然后想想怎么穷举更新这些「状态」。一般用一个多维 <code>dp</code> 数组储存这些状态，从 base case 开始向后推进，推进到最后的状态，就是我们想要的答案。想想这个过程，你是不是有点理解「动态规划」这个名词的意义了呢？</p>
<p>具体到股票买卖问题，我们发现了三个状态，使用了一个三维数组，无非还是穷举 + 更新，不过我们可以说的高大上一点，这叫「三维 DP」，怕不怕？这个大实话一说，立刻显得你高人一等，名利双收有没有，所以给个在看/分享吧，鼓励一下我。</p>
<hr>
<details>
<summary><strong>引用本文的题目</strong></summary>
<p><strong>安装 

<a href="https://mp.weixin.qq.com/s/X-fE9sR4BLi6T9pn7xP4pg" target="_blank" rel="noopener" class="highlight">我的 Chrome 刷题插件</a> 点开下列题目可直接查看解题思路：</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">LeetCode</th>
<th style="text-align:center">力扣</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-</td>
<td style="text-align:center">

<a href="https://leetcode.cn/problems/gu-piao-de-zui-da-li-run-lcof/?show=1" target="_blank" rel="noopener" class="highlight">剑指 Offer 63. 股票的最大利润</a></td>
</tr>
</tbody>
</table>
</details>
<hr>
<details>
<summary><strong>引用本文的文章</strong></summary>
<ul>
<li>

<a href="https://labuladong.gitee.io/algo/3/25/71/" target="_blank" rel="noopener" class="highlight">最优子结构原理和 dp 数组遍历方向</a></li>
<li>

<a href="https://labuladong.gitee.io/algo/3/27/81/" target="_blank" rel="noopener" class="highlight">经典动态规划：0-1 背包问题</a></li>
</ul>
</details><hr>
<p><strong>＿＿＿＿＿＿＿＿＿＿＿＿＿</strong></p>
<p><strong>《labuladong 的算法小抄》已经出版，关注公众号查看详情；后台回复关键词「<strong>进群</strong>」可加入算法群；回复「<strong>全家桶</strong>」可下载配套 PDF 和刷题全家桶</strong>：</p>
<p></p><figure><a href="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/souyisou2.png" data-featherlight="image"><img src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/souyisou2.png" class="shadow myimage souyisou_pic"></a>
</figure><div id="redirect_fname" data="团灭股票问题"></div><p></p>





<footer class=" footline">
	
</footer>

        
        </div>
        

<p style="margin-bottom:0px;font-size:14px;color:#586069;text-align:center;">
    <strong>共同维护高质量学习环境，评论礼仪<a href="https://mp.weixin.qq.com/s/YdSoYZS0QjZpbphQlpHyyA" target="_blank">见这里</a>，违者直接拉黑不解释</strong>
</p>

<script id="giscus_script" src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/client.js.下载" data-repo="labuladong/fucking-algorithm" data-repo-id="MDEwOlJlcG9zaXRvcnkyNDE1NzYyNzA=" data-category="comment" data-category-id="DIC_kwDODmYpTs4CQ1I4" data-mapping="number" data-reactions-enabled="0" data-emit-metadata="0" data-input-position="bottom" data-theme="light" data-lang="zh-CN" crossorigin="anonymous" async="" data-term="1012">
</script><div class="giscus"><iframe class="giscus-frame" title="Comments" scrolling="no" src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/widget.html"></iframe></div>

<script>
    if ($('#discuss_number').length) {
        
        const dis_number = $('#discuss_number').attr('data')
        $('#giscus_script').attr('data-term', dis_number)
    } else {
        
        
        $('#giscus_script').remove()
        
        const cmt_number = $('#cmt_number').attr('data')
        let script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = "https://utteranc.es/client.js"
        script.setAttribute('repo', "labuladong/fucking-algorithm")
        script.setAttribute('theme', "github-light")
        script.setAttribute('crossorigin', "anonymous")
        script.async = true;
        if (cmt_number) {
            script.setAttribute('issue-number', cmt_number)
        } else {
            script.setAttribute('issue-term', 'title')
        }
        document.currentScript.after(script)
    }


    
    const fname_redirect_url = 'https://' + location.hostname + '/article/fname.html?fname=' + $('#redirect_fname').attr('data')
    $('#top-bar .anchor').attr('data-clipboard-text', fname_redirect_url)

</script>
      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="https://labuladong.gitee.io/algo/1/12/" title="我写了首诗，把滑动窗口算法变成了默写题"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="https://labuladong.gitee.io/algo/1/14/" title="一个方法团灭 LeetCode 打家劫舍问题" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    <script>
        let EXT_ID = ""
        if (EXT_ID.length) {
          document.getElementById('body-inner').style['max-height'] = 'initial'
          $('#read_all_wrapper').css('display', 'none')
        }
        
        $('#read_all_btn').on('click', function () {
            $('#guiding_popup_wrapper').css('display', 'block')
        })
        $('#guiding_popup_div_close_btn').on('click', function () {
            $('#guiding_popup_wrapper').css('display', 'none')
        })

        const header_icons = $(`<p align='center'></p>`)
        // github
        header_icons.append($(`<a href="https://github.com/labuladong/fucking-algorithm" target="_blank"><img class='my_header_icon' alt="GitHub" src="https://img.shields.io/github/stars/labuladong/fucking-algorithm?label=Stars&style=flat&logo=GitHub"></a>`))
        // 公众号
        
        
        header_icons.append($(`<a href="https://space.bilibili.com/14089380" target="_blank"><img class='my_header_icon' src="https://img.shields.io/badge/B站-@labuladong-000000.svg?style=flat&logo=Bilibili"></a>`))
        // 三件套下载
        header_icons.append($(`<a href="https://mp.weixin.qq.com/s/X-fE9sR4BLi6T9pn7xP4pg" target="_blank"><img class='my_header_icon' src="https://img.shields.io/static/v1?label=配套PDF和插件&message=下载&color=red&style=flat"></a>`))
        // 打卡挑战
        header_icons.append($(`<a href="https://mp.weixin.qq.com/s/eUG2OOzY3k_ZTz-CFvtv5Q" target="_blank"><img class='my_header_icon' src="https://img.shields.io/static/v1?label=打卡挑战&message=报名&color=green&style=flat"></a>`))
        // xiaoe
        header_icons.append($(`<a href="https://appktavsiei5995.pc.xiaoe-tech.com/index" target="_blank"><img class='my_header_icon' src="https://img.shields.io/static/v1?label=精品课程&message=查看&color=pink&style=flat"></a>`))

        // 添加头部 icon
        $('h1').after(header_icons)

        
        $('img').filter(function () {
            return $(this).attr('src').match(/souyisou\d*/);
        }).addClass('souyisou_pic')
      </script>
    
    <script type="text/javascript" src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/render.js.下载"></script>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/clipboard.min.js.下载"></script>
    <script src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/perfect-scrollbar.min.js.下载"></script>
    <script src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/perfect-scrollbar.jquery.min.js.下载"></script>
    <script src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/jquery.sticky.js.下载"></script>
    <script src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/featherlight.min.js.下载"></script>
    <script src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/highlight.pack.js.下载"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/modernizr.custom-3.6.0.js.下载"></script>
    <script src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/learn.js.下载"></script>
    <script src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/hugo-learn.js.下载"></script>
    
    






<script async="" src="./一个方法团灭 LeetCode 股票买卖问题 __ labuladong的算法小抄_files/js"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-3Z5M0X5DYE');
</script>


<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?8b6d7a4489d030cd541ae6fdef62bac5";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
  

<audio controls="controls" style="display: none;"></audio></body><style type="text/css">#yddContainer{display:block;font-family:Microsoft YaHei;position:relative;width:100%;height:100%;top:-4px;left:-4px;font-size:12px;border:1px solid}#yddTop{display:block;height:22px}#yddTopBorderlr{display:block;position:static;height:17px;padding:2px 28px;line-height:17px;font-size:12px;color:#5079bb;font-weight:bold;border-style:none solid;border-width:1px}#yddTopBorderlr .ydd-sp{position:absolute;top:2px;height:0;overflow:hidden}.ydd-icon{left:5px;width:17px;padding:0px 0px 0px 0px;padding-top:17px;background-position:-16px -44px}.ydd-close{right:5px;width:16px;padding-top:16px;background-position:left -44px}#yddKeyTitle{float:left;text-decoration:none}#yddMiddle{display:block;margin-bottom:10px}.ydd-tabs{display:block;margin:5px 0;padding:0 5px;height:18px;border-bottom:1px solid}.ydd-tab{display:block;float:left;height:18px;margin:0 5px -1px 0;padding:0 4px;line-height:18px;border:1px solid;border-bottom:none}.ydd-trans-container{display:block;line-height:160%}.ydd-trans-container a{text-decoration:none;}#yddBottom{position:absolute;bottom:0;left:0;width:100%;height:22px;line-height:22px;overflow:hidden;background-position:left -22px}.ydd-padding010{padding:0 10px}#yddWrapper{color:#252525;z-index:10001;background:url(chrome-extension://eopjamdnofihpioajgfdikhhbobonhbb/ab20.png);}#yddContainer{background:#fff;border-color:#4b7598}#yddTopBorderlr{border-color:#f0f8fc}#yddWrapper .ydd-sp{background-image:url(chrome-extension://eopjamdnofihpioajgfdikhhbobonhbb/ydd-sprite.png)}#yddWrapper a,#yddWrapper a:hover,#yddWrapper a:visited{color:#50799b}#yddWrapper .ydd-tabs{color:#959595}.ydd-tabs,.ydd-tab{background:#fff;border-color:#d5e7f3}#yddBottom{color:#363636}#yddWrapper{min-width:250px;max-width:400px;}</style></html>